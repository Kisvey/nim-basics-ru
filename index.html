<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Основы Nim</title>
<link rel="stylesheet" href="./styles/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./rouge-molokai.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Основы Nim</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_для_кого_этот_туториал">Для кого этот туториал?</a></li>
<li><a href="#_для_кого_этот_туториал_не_предназначен">Для кого этот туториал <em>не предназначен</em>?</a></li>
<li><a href="#_как_использовать_этот_туториал">Как использовать этот туториал?</a></li>
<li><a href="#_установка">Установка</a>
<ul class="sectlevel1">
<li><a href="#_установка_nim">Установка Nim</a></li>
<li><a href="#_установка_дополнительных_инструментов">Установка дополнительных инструментов</a></li>
<li><a href="#_проверка_установки">Проверка установки</a></li>
</ul>
</li>
<li><a href="#_присваивание_имён_значениям">Присваивание имён значениям</a>
<ul class="sectlevel1">
<li><a href="#_декларация_переменной">Декларация переменной</a></li>
<li><a href="#_неизменяемые_присваивания">Неизменяемые присваивания</a>
<ul class="sectlevel2">
<li><a href="#_const">Const</a></li>
<li><a href="#_let">Let</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_основные_типы_данных">Основные типы данных</a>
<ul class="sectlevel1">
<li><a href="#_целые_числа">Целые числа</a></li>
<li><a href="#_числа_с_плавающей_точкой">Числа с плавающей точкой</a>
<ul class="sectlevel2">
<li><a href="#_преобразование_float_и_int">Преобразование float и int</a></li>
</ul>
</li>
<li><a href="#_символы">Символы</a></li>
<li><a href="#_строки">Строки</a>
<ul class="sectlevel2">
<li><a href="#_специальные_символы_в_строках">Специальные символы в строках</a></li>
<li><a href="#_конкатенация_строк">Конкатенация строк</a></li>
</ul>
</li>
<li><a href="#_булевы_значения">Булевы значения</a>
<ul class="sectlevel2">
<li><a href="#_операторы_сравнения">Операторы сравнения</a></li>
<li><a href="#_логические_операторы">Логические операторы</a></li>
</ul>
</li>
<li><a href="#_заключение">Заключение</a></li>
<li><a href="#_упражнения">Упражнения</a></li>
</ul>
</li>
<li><a href="#_поток_управления">Поток управления</a>
<ul class="sectlevel1">
<li><a href="#_оператор_if">Оператор If</a>
<ul class="sectlevel2">
<li><a href="#_else">Else</a></li>
<li><a href="#_elif">Elif</a></li>
</ul>
</li>
<li><a href="#_case">Case</a></li>
</ul>
</li>
<li><a href="#_циклы">Циклы</a>
<ul class="sectlevel1">
<li><a href="#_цикл_for">Цикл For</a></li>
<li><a href="#_цикл_while">Цикл While</a></li>
<li><a href="#_break_и_continue">Break и continue</a></li>
<li><a href="#_упражнения_2">Упражнения</a></li>
</ul>
</li>
<li><a href="#_контейнеры">Контейнеры</a>
<ul class="sectlevel1">
<li><a href="#_массивы">Массивы</a></li>
<li><a href="#_последовательность">Последовательность</a></li>
<li><a href="#_индексация_и_срезы">Индексация и срезы</a></li>
<li><a href="#_кортежи">Кортежи</a></li>
<li><a href="#_упражнения_3">Упражнения</a></li>
</ul>
</li>
<li><a href="#_процедуры">Процедуры</a>
<ul class="sectlevel1">
<li><a href="#_объявление_процедуры">Объявление процедуры</a></li>
<li><a href="#_вызов_процедуры">Вызов процедуры</a></li>
<li><a href="#_переменная_result">Переменная result</a></li>
<li><a href="#_предварительное_объявление">Предварительное объявление</a></li>
<li><a href="#_упражнения_4">Упражнения</a></li>
</ul>
</li>
<li><a href="#_модули">Модули</a>
<ul class="sectlevel1">
<li><a href="#_импортирование_модуля">Импортирование модуля</a></li>
<li><a href="#_создание_собственных_модулей">Создание собственных модулей</a></li>
</ul>
</li>
<li><a href="#_взаемодействие_с_пользовательским_вводом">Взаемодействие с пользовательским вводом</a>
<ul class="sectlevel1">
<li><a href="#_чтение_из_файла">Чтение из файла</a></li>
<li><a href="#_чтение_пользовательского_ввода">Чтение пользовательского ввода</a></li>
<li><a href="#_работа_с_числами">Работа с числами</a></li>
<li><a href="#_упражнения_5">Упражнения</a></li>
</ul>
</li>
<li><a href="#_заключение_2">Заключение</a>
<ul class="sectlevel1">
<li><a href="#_что_дальше">Что дальше?</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://nim-lang.org/">Nim</a> это относительно новый язык программирования что позволяет позволяет писать лёгкий к чтению и высоко-производительный код.
Но если вы читаете данный Туториал, вы скорее всего уже хотя-бы немного знакомы с Nim. <em>(Прим. пер.: Вам скорее всего уже прожужжали уши)</em></p>
</div>
<div class="paragraph">
<p>Туториал доступен <a href="https://kisvey.github.io/nim-basics-ru/">онлайн</a> и в <a href="https://github.com/kisvey/nim-basics-ru/raw/master/nim-basics.epub">качестве книги в формате epub</a>. <em>(Прим. пер.: <a href="https://github.com/narimiran/nim-basics">Оригинальная версия</a>)</em></p>
</div>
<div class="paragraph">
<p>Над ней всё ещё продолжается работа: если вы встретите ошибки и/или у вас есть идея как сделать данный Туториал лучше, пожалуйста сообщайте об этом в <a href="https://github.com/kisvey/nim-basics/issues">issue tracker</a>. <em>(Прим. пер.: Если ошибка присутствует и в оригинале лучше сообщить <a href="https://github.com/narimiran/nim-basics/issues">сюда</a>)</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_для_кого_этот_туториал">Для кого этот туториал?</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Людям без опыта в программировании или с минимальным опытом</p>
</li>
<li>
<p>Людям с некоторым опытом в программировании на других языках программирования</p>
</li>
<li>
<p>Людям что хотят изучить Nim с нуля</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_для_кого_этот_туториал_не_предназначен">Для кого этот туториал <em>не предназначен</em>?</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Людям с большим опытом программирования: другие, более продвинутые туториалы могут подойти вам лучше.
Посмотрите <a href="https://nim-lang.org/docs/tut1.html">Official Tutorial</a> или <a href="https://nim-by-example.github.io/">Nim by Example</a>.</p>
</li>
<li>
<p>Людям с опытом в Nim (Если желаете можете помочь с переводом или улучшением данного туториала)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_как_использовать_этот_туториал">Как использовать этот туториал?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Цель данного туториала&#8201;&#8212;&#8201;дать вам основы программирования и синтаксиса Nim, чтобы вам было проще следовать другим туториалам и/или исследовать дальше самостоятельно.</p>
</div>
<div class="paragraph">
<p>Вместо того чтобы просто читать написанное, будет лучше если вы попробуете всё самостоятельно, измените примеры, придумаете свои собственные примеры и в целом будете любопытны.
Упражнения в конце некоторых глав могут быть обязательными&#8201;&#8212;&#8201;не пропускайте их.</p>
</div>
<div class="paragraph">
<p>Если вам нужна дополнительная помощь в понимании некоторых частей туториала или с упражнениями, вы всегда можете попросить помощи на <a href="https://forum.nim-lang.org/">форуме Nim</a>, <a href="https://gitter.im/nim-lang/Nim">канале Nim Gitter</a>, их <a href="https://discordapp.com/invite/ezDFDw2">Discord сервере</a>, или в IRC канале Nim на freenode, #nim.</p>
</div>
</div>
</div>
<h1 id="_установка" class="sect0">Установка</h1>
<div class="sect1">
<h2 id="_установка_nim">Установка Nim</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nim уже имеет готовые дистрибутивы для всех трёх основных операционных систем, и есть несколько вариантов установки Nim.</p>
</div>
<div class="paragraph">
<p>Вы можете следовать <a href="https://nim-lang.org/install.html">официальной процедуре установки</a> чтобы установить последнюю стабильную версию, или вы можете использовать инструмент под названием <a href="https://github.com/nim-lang/choosenim">choosenim</a>, который позволяет легко переключаться между стабильной и последней версией разработки, если вы хотите использовать последние функции и исправления.
н
Какой бы способ вы ни выбрали, просто следуйте процедуре установки, объясненной на каждом из этих ресурсов, и Nim будет установлен.
Мы проверим успешность установки в следующем разделе.</p>
</div>
<div class="paragraph">
<p>Если вы используете Linux, существует высокая вероятность, что ваш дистрибутив имеет Nim в менеджере пакетов.
Если вы устанавливаете его таким образом, убедитесь, что это последняя версия (см. сайт для информации о последней версии), иначе установите через один из двух методов, упомянутых выше.</p>
</div>
<div class="paragraph">
<p>В этом руководстве мы будем использовать стабильную версию.
Изначально это руководство было написано для Nim 0.19 (выпущена в сентябре 2018 года), и оно должно работать с любой более новой версией, включая Nim 1.x и Nim 2.x.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_установка_дополнительных_инструментов">Установка дополнительных инструментов</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Вы можете писать код на Nim в любом текстовом редакторе, а затем компилировать и запускать его из терминала.
Если вы хотите подсветку синтаксиса и автозавершение кода, существуют плагины для популярных редакторов кода, которые предоставляют данные функции.</p>
</div>
<div class="paragraph">
<p>Большинство пользователей Nim предпочитают редактор <a href="https://code.visualstudio.com/">VS Code</a> с <a href="https://marketplace.visualstudio.com/items?itemName=NimLang.nimlang">расширением Nim</a>, которое предоставляет подсветку синтаксиса и автозавершение кода, и <a href="https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner">расширением Code Runner</a> для быстрой компиляции и запуска.</p>
</div>
<div class="paragraph">
<p>Автор лично использует <a href="https://neovim.io/">NeoVim</a> редактор с <a href="https://github.com/alaviss/nim.nvim">этим плагином</a>, который предоставляет дополнительные функции, такие как подсветка синтаксиса и автозавершение кода.</p>
</div>
<div class="paragraph">
<p>Если вы используете другие редакторы кода, посмотрите <a href="https://github.com/nim-lang/Nim/wiki/Editor-Support">вики</a> для доступной поддержки редакторов.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_проверка_установки">Проверка установки</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Чтобы проверить успешность установки, мы напишем программу, которая традиционно используется в качестве вводного примера: <a href="https://en.wikipedia.org/wiki/%22Hello,_World!%22_program">Hello World</a>.</p>
</div>
<div class="paragraph">
<p>Печать (в смысле: отображать на экране; не на бумаге с помощью принтера) фразу <code>Hello World!</code> на Nim просто и не требует никакого шаблонного кода.</p>
</div>
<div class="paragraph">
<p>В новом текстовом файле под названием, например, <code>helloworld.nim</code> нужно написать всего одну строку кода:</p>
</div>
<div class="listingblock">
<div class="title">helloworld.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"Hello World!"</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Фраза, которую вы хотите напечатать, должна следовать за командой <code>echo</code> и быть заключена в двойные кавычки (<code>"</code>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Прежде нам нужно скомпилировать нашу программу, а затем запустить её, чтобы проверить, работает ли она как ожидается.</p>
</div>
<div class="paragraph">
<p>Откройте ваш терминал в той же директории, где находится ваш файл (на Linux вы можете открыть "Открыть терминал здесь", если вы щёлкните правой кнопкой мыши по директории в вашем файловом менеджере, на Windows вы должны использовать Shift + щёлкнуть правой кнопкой мыши, чтобы получить опцию меню для открытия командной строки).</p>
</div>
<div class="paragraph">
<p>Мы компилируем нашу программу, набирая в терминале:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">nim c helloworld.nim</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>После успешной компиляции мы можем запустить нашу программу.
На Linux мы можем запустить нашу программу, набрав <code>./helloworld</code> в терминале, а на Windows мы делаем это, набрав <code>helloworld.exe</code>.</p>
</div>
<div class="paragraph">
<p>также есть возможность скомпилировать и запустить программу одной командой.
Нужно набрать:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">nim c -r helloworld.nim</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>c</code> говорит Nim скомпилировать файл, а <code>-r</code> говорит сразу же его запустить. Чтобы увидеть все опции компилятора, наберите <code>nim --help</code> в вашем терминале.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Если вы используете VSCode с упомянутым ранее расширением Code Runner, вам просто нужно нажать <code>Ctrl+Alt+N</code>, и ваш файл будет скомпилирован и запущен.</p>
</div>
<div class="paragraph">
<p>Не важно, какой из этих способов вы выберете для запуска вашей программы, после короткого момента в окне вывода (или в вашем терминале) вы должны увидеть:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Hello World!</code></pre>
</div>
</div>
<div class="paragraph">
<p>Поздравляем, вы успешно запустили свою первую программу на Nim!</p>
</div>
<div class="paragraph">
<p>Теперь вы знаете, как печатать текст на экране (используя команду <code>echo</code>), компилировать программу (набирая <code>nim c programName.nim</code> в терминале) и запускать её (различными способами).</p>
</div>
<div class="paragraph">
<p>Мы можем теперь начать изучать основные элементы, которые помогут нам писать простые программы на Nim.</p>
</div>
</div>
</div>
<h1 id="_присваивание_имён_значениям" class="sect0">Присваивание имён значениям</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Может быть полезно давать значениям в наших программах имена, чтобы помочь нам отслеживать их.
Если мы спрашиваем у пользователя его/её имя, мы хотим сохранить его для дальнейшего использования, не спрашивая его снова и снова каждый раз, когда нам нужно сделать с ним какие-то вычисления.</p>
</div>
<div class="paragraph">
<p>В примере <code>pi = 3.14</code>, имя <code>pi</code> связано со значением <code>3.14</code>.
Из нашего опыта мы можем сказать, что тип переменной <code>pi</code> — это (десятичное) число.</p>
</div>
<div class="paragraph">
<p>Другой пример — <code>firstName = Alice</code>, где <code>firstName</code> — это имя переменной со значением <code>Alice</code>.
Мы бы сказали, что тип этой переменной — это слово.</p>
</div>
<div class="paragraph">
<p>В языках программирования это работает аналогично.
Данные присваивания имён имеют своё <em>имя</em>, <em>значение</em> и <em>тип</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_декларация_переменной">Декларация переменной</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nim это <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%82%D0%B8%D0%BF%D0%BE%D0%B2">статически типизированный</a> язык программирования, что означает, что тип присваивания должен быть объявлен до использования значения.</p>
</div>
<div class="paragraph">
<p>В Nim мы также различаем значения, которые могут изменяться (или мутировать), и те, которые не могут, но об этом позже.
Мы можем объявить переменную (изменяемое присваивание) с помощью ключевого слова <code>var</code>, просто указав её имя и тип (значение можно добавить позже), используя следующий синтаксис:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">type</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Если мы уже знаем значение, мы можем объявить переменную и сразу присвоить ей значение:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">type</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Угловые скобки(<code>&lt;&gt;</code>) используются для обозначения того, что вы можете изменить.<br>
Таким образом, <code>&lt;name&gt;</code> — это не буквально слово <code>name</code> в угловых скобках, а любое имя.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Nim также обладает способностью <a href="https://ru.wikipedia.org/wiki/%D0%92%D1%8B%D0%B2%D0%BE%D0%B4_%D1%82%D0%B8%D0%BF%D0%BE%D0%B2">вывода типов</a>: компилятор может автоматически определять тип присваивания имени по его значению, без явного указания типа.
Мы посмотрим различные типы подробнее в <a href="#_основные_типы_данных">следующей главе</a>.</p>
</div>
<div class="paragraph">
<p>Так что мы можем присвоить переменную без явного указания типа следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Вот пример того, как это выглядит в Nim.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">a</span><span class="p">:</span> <span class="kt">int</span>  <i class="conum" data-value="1"></i><b>(1)</b>
<span class="k">var</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">7</span>   <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Переменная <code>a</code> имеет тип <code>int</code> (integer) без явно определенного значения.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Переменная <code>b</code> имеет значение <code>7</code>. Её тип автоматически определяется как integer.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Когда вы присваиваете имена, важно выбирать имена, которые что-то значат для вашей программы.
Простое именование их <code>a</code>, <code>b</code>, <code>c</code> и так далее быстро станет запутанным.
Невозможно использовать пробелы в имени, так как это разделит его на два.
Поэтому, если выбранное вами имя состоит из более чем одного слова, обычно его пишут в стиле <code>camelCase</code> (обратите внимание, что первая буква в имени должна быть строчной).</p>
</div>
<div class="paragraph">
<p>Заметьте, однако, что Nim не различает регистр букв и подчёркивания, что означает, что <code>helloWorld</code> и <code>hello_world</code> будут одним и тем же именем.
Исключением из этого правила является первый символ, который <em>различает</em> регистр букв.
Имена также могут включать как цифры, так и другие символы UTF-8, даже эмодзи, если вы того пожелаете, но имейте в виду, что вам и, возможно, другим придётся их вводить.</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Вместо того чтобы набирать <code>var</code> для каждой переменной, несколько переменных (не обязательно одного типа) могут быть объявлены в одном блоке <code>var</code>.
В Nim блоки — это части кода с одинаковым отступом (одинаковым количеством пробелов перед первым символом), и уровень отступа по умолчанию — два пробела.
Вы увидите такие блоки повсюду в программе на Nim, не только для присваивания имён.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="mi">11</span>
  <span class="n">d</span> <span class="o">=</span> <span class="s">"Hello"</span>
  <span class="n">e</span> <span class="o">=</span> <span class="sc">'!'</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
В Nim Табы не допускаются в качестве отступов.<br>
Вы можете настроить ваш редактор кода так, чтобы при нажатии <code>Tab</code> вставлялось любое количество пробелов.<br>
В VS Code настройка по умолчанию — преобразование <code>Tab</code> в четыре пробела.
Это легко изменить в настройках (<code>Ctrl+,</code>), установив <code>"editor.tabSize": 2</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Как и было упомянуто ранее, переменные изменяемы, то есть их значение может изменяться (несколько раз), но их тип должен оставаться таким же, как и было декларировано.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">7</span>           <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">f</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>              <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">f</span> <span class="o">=</span> <span class="mi">19</span>
<span class="n">f</span> <span class="o">=</span> <span class="s">"Hello"</span> <span class="c"># error </span><i class="conum" data-value="3"></i><b>(3)</b> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Переменная <code>f</code> имеет начальное значение <code>7</code> и её тип автоматически определяется как <code>int</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Значение переменной <code>f</code> сначала изменяется на <code>-3</code>, а затем на <code>19</code>. Оба этих значения являются целыми числами, как и исходное значение.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Попытка изменить значение переменной <code>f</code> на <code>"Hello"</code> вызывает ошибку, потому что <code>"Hello"</code> не является числом, и это изменило бы тип переменной <code>f</code> с целого числа на строку.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code># error</code> — это комментарий. Комментарии в коде Nim пишутся после символа <code>#</code>. Все, что находится после него на той же строке, будет проигнорировано.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_неизменяемые_присваивания">Неизменяемые присваивания</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В отличие от переменных, объявленных с помощью ключевого слова <code>var</code>, в Nim существуют ещё два типа присваиваний, значение которых не может изменяться, один объявляется с помощью ключевого слова <code>const</code>, а другой — с помощью ключевого слова <code>let</code>.</p>
</div>
<div class="sect2">
<h3 id="_const">Const</h3>
<div class="paragraph">
<p>Значение неизменяемого присваивания, объявленного с помощью ключевого слова <code>const</code>, должно быть известно на этапе компиляции (до запуска программы).</p>
</div>
<div class="paragraph">
<p>Для примера, мы можем объявить ускорение свободного падения как <code>const g = 9.81</code> или число пи как <code>const pi = 3.14</code>, так как мы знаем их значения заранее, и эти значения не изменятся во время выполнения нашей программы.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">const</span> <span class="n">g</span> <span class="o">=</span> <span class="mi">35</span>
<span class="n">g</span> <span class="o">=</span> <span class="o">-</span><span class="mi">27</span>         <span class="c"># error </span><i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">var</span> <span class="n">h</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span>
<span class="k">const</span> <span class="n">i</span> <span class="o">=</span> <span class="n">h</span> <span class="o">+</span> <span class="mi">7</span> <span class="c"># error </span><i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Значение константы не может быть изменено.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Переменная <code>h</code> не вычисляется на этапе компиляции (это переменная, и её значение может изменяться во время выполнения программы), следовательно, значение константы <code>i</code> не может быть известно на этапе компиляции, и это вызовет ошибку.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>В некоторых языках программирования принято писать имена констант в <code>ALL_CAPS</code>.
Константы в Nim пишутся так же, как и любые другие переменные.</p>
</div>
</div>
<div class="sect2">
<h3 id="_let">Let</h3>
<div class="paragraph">
<p>Неизменяемые присваивания, объявленные с помощью ключевого слова <code>let</code>, не нуждаются в знании на этапе компиляции, их значение может быть установлено в любое время во время выполнения программы, но как только оно установлено, его значение не может измениться.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">35</span>
<span class="n">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">27</span> <span class="c"># error </span><i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">var</span> <span class="n">k</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span>
<span class="k">let</span> <span class="n">l</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">7</span>   <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Значение неизменяемого присваивания не может быть изменено.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>В отличие от примера с <code>const</code> выше, это работает.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>На практике вы будете чаще видеть/использовать <code>let</code>, чем <code>const</code>.</p>
</div>
<div class="paragraph">
<p>Пока вы можете использовать <code>var</code> для всего, вашим выбором по умолчанию должно быть <code>let</code>.
Используйте <code>var</code> только для переменных, которые будут изменяться.</p>
</div>
</div>
</div>
</div>
<h1 id="_основные_типы_данных" class="sect0">Основные типы данных</h1>
<div class="sect1">
<h2 id="_целые_числа">Целые числа</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Как видно из предыдущей главы, целые числа - это числа, которые записываются без дробной части и без десятичной точки.</p>
</div>
<div class="paragraph">
<p>Например: <code>32</code>, <code>-174</code>, <code>0</code>, <code>10_000_000</code> являются целыми числами.
Обратите внимание, что мы можем использовать <code>_</code> как разделитель тысяч, чтобы сделать большие числа более читаемыми (легче понять, что речь идет о 10 миллионов, когда они записаны как 10_000_000, а не как 10000000).</p>
</div>
<div class="paragraph">
<p>Обычные математические операторы&#8201;&#8212;&#8201;сложение (<code>+</code>), вычитание (<code>-</code>), умножение (<code>*</code>) и деление (<code>/</code>)&#8201;&#8212;&#8201;работают так, как можно было бы ожидать.
Первые три операции всегда производят целые числа, в то время как деление двух целых чисел всегда дает число с плавающей точкой (число с десятичной точкой) в результате, даже если два числа могут быть разделены без остатка.</p>
</div>
<div class="paragraph">
<p>Деление целых чисел (деление, при котором дробная часть отбрасывается) можно выполнить с помощью оператора <code>div</code>.
Оператор <code>mod</code> используется, если вас интересует остаток от деления целых чисел (модуль).
Результат этих двух операций всегда является целым числом.</p>
</div>
<div class="listingblock">
<div class="title">integers.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">11</span>
  <span class="n">b</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">echo</span> <span class="s">"a + b = "</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="s">"a - b = "</span><span class="p">,</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
<span class="n">echo</span> <span class="s">"a * b = "</span><span class="p">,</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
<span class="n">echo</span> <span class="s">"a / b = "</span><span class="p">,</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
<span class="n">echo</span> <span class="s">"a div b = "</span><span class="p">,</span> <span class="n">a</span> <span class="ow">div</span> <span class="n">b</span>
<span class="n">echo</span> <span class="s">"a mod b = "</span><span class="p">,</span> <span class="n">a</span> <span class="ow">mod</span> <span class="n">b</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Команда <code>echo</code> напечатает на экране всё, что следует за ней, разделённое запятыми. В данном случае она сначала печатает строку <code>a + b = </code>, а затем, в той же строке, печатает результат выражения <code>a + b</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Мы можем скомпилировать и запустить приведённый выше код, и вывод должен быть следующим:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">a + b = 15
a - b = 7
a * b = 44
a / b = 2.75
a div b = 2
a mod b = 3</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_числа_с_плавающей_точкой">Числа с плавающей точкой</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Числа с плавающей точкой, или просто float, являются <a href="https://ru.wikipedia.org/wiki/%D0%A7%D0%B8%D1%81%D0%BB%D0%BE_%D1%81_%D0%BF%D0%BB%D0%B0%D0%B2%D0%B0%D1%8E%D1%89%D0%B5%D0%B9_%D0%B7%D0%B0%D0%BF%D1%8F%D1%82%D0%BE%D0%B9">приблизительным представлением</a> действительных чисел.</p>
</div>
<div class="paragraph">
<p>Например: <code>2.73</code>, <code>-3.14</code>, <code>5.0</code>, <code>4e7</code> являются числами с плавающей точкой.
Обратите внимание, что мы можем использовать научную нотацию для больших чисел с плавающей точкой, где число после <code>e</code> является показателем степени.
В этом примере, <code>4e7</code> - это запись, представляющая <code>4 * 10^7</code>.</p>
</div>
<div class="paragraph">
<p>Мы можем выполнять математические операции с числами с плавающей точкой так же, как и с целыми числами.
Операторы <code>div</code> и <code>mod</code> не определены для чисел с плавающей точкой.</p>
</div>
<div class="listingblock">
<div class="title">floats.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mf">6.75</span>
  <span class="n">d</span> <span class="o">=</span> <span class="mf">2.25</span>

<span class="n">echo</span> <span class="s">"c + d = "</span><span class="p">,</span> <span class="n">c</span> <span class="o">+</span> <span class="n">d</span>
<span class="n">echo</span> <span class="s">"c - d = "</span><span class="p">,</span> <span class="n">c</span> <span class="o">-</span> <span class="n">d</span>
<span class="n">echo</span> <span class="s">"c * d = "</span><span class="p">,</span> <span class="n">c</span> <span class="o">*</span> <span class="n">d</span>
<span class="n">echo</span> <span class="s">"c / d = "</span><span class="p">,</span> <span class="n">c</span> <span class="o">/</span> <span class="n">d</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">c + d = 9.0  <i class="conum" data-value="1"></i><b>(1)</b>
c - d = 4.5
c * d = 15.1875
c / d = 3.0  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Обратите внимание, что в примерах сложения и деления, даже если мы получаем число без десятичной части, результат всё равно является числом с плавающей точкой.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Последовательность выполнения математических операций соответствует ожидаемой: умножение и деление имеют более высокий приоритет, чем сложение и вычитание.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">4</span>
<span class="n">echo</span> <span class="mi">24</span> <span class="o">-</span> <span class="mi">8</span> <span class="o">/</span> <span class="mi">4</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">14
22.0</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_преобразование_float_и_int">Преобразование float и int</h3>
<div class="paragraph">
<p>Математические операции между переменными разных числовых типов невозможны в Nim и приведут к ошибке:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">e</span> <span class="o">=</span> <span class="mi">5</span>
  <span class="n">f</span> <span class="o">=</span> <span class="mf">23.456</span>

<span class="n">echo</span> <span class="n">e</span> <span class="o">+</span> <span class="n">f</span>   <span class="c"># error</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Значения переменных необходимо преобразовать к одному типу.
Преобразование достаточно простое: для преобразования в целое число используется функция <code>int</code>, а для преобразования в число с плавающей точкой - функция <code>float</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">e</span> <span class="o">=</span> <span class="mi">5</span>
  <span class="n">f</span> <span class="o">=</span> <span class="mf">23.987</span>

<span class="n">echo</span> <span class="kt">float</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>      <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="kt">int</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>        <i class="conum" data-value="2"></i><b>(2)</b>

<span class="n">echo</span> <span class="kt">float</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">+</span> <span class="n">f</span>  <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="n">e</span> <span class="o">+</span> <span class="kt">int</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>    <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Печать <code>float</code> версии <code>int</code> числа <code>e</code>. (<code>e</code> остаётся <code>int</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Печать <code>int</code> версии <code>float</code> числа <code>f</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Оба операнда являются числами с плавающей точкой и могут быть сложены.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Оба операнда являются целыми числами и могут быть сложены.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="mf">5.0</span>
<span class="mi">23</span>
<span class="mf">28.987</span>
<span class="mi">28</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Когда мы используем функцию <code>int</code> для преобразования числа с плавающей точкой в целое, округление не производится.
Число просто отбрасывает десятичную часть.<br>
Для выполнения округления необходимо вызвать другую функцию, но для этого нужно знать немного больше о том, как использовать Nim.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_символы">Символы</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Тип <code>char</code> используется для представления одного <a href="https://ru.wikipedia.org/wiki/ASCII">ASCII</a> символа.</p>
</div>
<div class="paragraph">
<p>Символы записываются между двумя одинарными кавычками (<code>'</code>).
Символы могут быть буквами, символами или одиночными цифрами.
Несколько цифр или несколько букв вызовут ошибку.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">h</span> <span class="o">=</span> <span class="sc">'z'</span>
  <span class="n">i</span> <span class="o">=</span> <span class="sc">'+'</span>
  <span class="n">j</span> <span class="o">=</span> <span class="sc">'2'</span>
  <span class="n">k</span> <span class="o">=</span> <span class="sc">'35'</span> <span class="c"># error</span>
  <span class="n">l</span> <span class="o">=</span> <span class="sc">'xy'</span> <span class="c"># error</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_строки">Строки</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Строки могут быть описаны как последовательность символов.
Их содержимое записывается между двумя двойными кавычками (<code>"</code>).</p>
</div>
<div class="paragraph">
<p>Мы можем думать о строках как о словах, но они могут содержать более одного слова, некоторые символы или цифры.</p>
</div>
<div class="listingblock">
<div class="title">strings.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">m</span> <span class="o">=</span> <span class="s">"word"</span>
  <span class="n">n</span> <span class="o">=</span> <span class="s">"A sentence with interpunction."</span>
  <span class="n">o</span> <span class="o">=</span> <span class="s">""</span>    <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">p</span> <span class="o">=</span> <span class="s">"32"</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">q</span> <span class="o">=</span> <span class="s">"!"</span>   <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Пустая строка.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Это не число (int). Оно находится внутри двойных кавычек, поэтому является строкой.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Даже если это только один символ, это не char, потому что он заключен внутри двойных кавычек.</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_специальные_символы_в_строках">Специальные символы в строках</h3>
<div class="paragraph">
<p>Есди мы попытаемся напечатать следующую строку:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"some</span><span class="se">\n</span><span class="s">im</span><span class="se">\t</span><span class="s">ips"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>результат может удивить нас:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">some
im	ips</code></pre>
</div>
</div>
<div class="paragraph">
<p>Это происходит потому, что есть несколько символов, которые имеют специальное значение.
Они используются путем добавления перед ними символа экранирования <code>\</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>\n</code> это символ новой строки</p>
</li>
<li>
<p><code>\t</code> это символ табуляции</p>
</li>
<li>
<p><code>\\</code> это обратная косая черта (так как одна <code>\</code> используется как символ экранирования)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Если мы хотим напечатать вышеуказанный пример так, как он был написан, у нас есть два варианта:
* Используйте <code>\\</code> вместо <code>\</code> для печати обратных косых черт, или
* Используйте сырые строки, которые имеют синтаксис <code>r"&#8230;&#8203;"</code> (помещая букву <code>r</code> сразу перед первой кавычкой), в которых нет символов экранирования и специальных значений: всё печатается как есть.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"some</span><span class="se">\\</span><span class="s">nim</span><span class="se">\\</span><span class="s">tips"</span>
<span class="n">echo</span> <span class="s">r"some\nim\tips"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">some\nim\tips
some\nim\tips</code></pre>
</div>
</div>
<div class="paragraph">
<p>Есть и другие специальные символы, помимо перечисленных выше и их можно найти в <a href="https://nim-lang.org/docs/manual.html#lexical-analysis-string-literals">руководстве по Nim</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_конкатенация_строк">Конкатенация строк</h3>
<div class="paragraph">
<p>Строки в Nim изменяемы, что означает, что их содержимое может изменяться.
С помощью функции <code>add</code> мы можем добавить (присоединить) либо другую строку, либо символ к существующей строке.
Если мы не хотим изменять исходную строку, мы также можем конкатенировать (соединять вместе) строки с помощью оператора <code>&amp;</code>, который возвращает новую строку.</p>
</div>
<div class="listingblock">
<div class="title">stringConcat.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>                     <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">p</span> <span class="o">=</span> <span class="s">"abc"</span>
  <span class="n">q</span> <span class="o">=</span> <span class="s">"xy"</span>
  <span class="n">r</span> <span class="o">=</span> <span class="sc">'z'</span>

<span class="n">p</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">"def"</span><span class="p">)</span>            <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="s">"p is now: "</span><span class="p">,</span> <span class="n">p</span>

<span class="n">q</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>                <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="s">"q is now: "</span><span class="p">,</span> <span class="n">q</span>

<span class="n">echo</span> <span class="s">"concat: "</span><span class="p">,</span> <span class="n">p</span> <span class="o">&amp;</span> <span class="n">q</span>  <i class="conum" data-value="4"></i><b>(4)</b>

<span class="n">echo</span> <span class="s">"p is still: "</span><span class="p">,</span> <span class="n">p</span>
<span class="n">echo</span> <span class="s">"q is still: "</span><span class="p">,</span> <span class="n">q</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Если мы планируем изменять строки, они должны быть объявлены как <code>var</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Добавление другой строки изменяет существующую строку <code>p</code> на месте, меняя её значение.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Мы также можем добавить символ к строке.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Конкатенация двух строк создаёт новую строку, не изменяя исходные строки.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">p is now: abcdef
q is now: xyz
concat: abcdefxyz
p is still: abcdef
q is still: xyz</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_булевы_значения">Булевы значения</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Булево значение (или просто <code>bool</code>) может иметь только два значения: <code>true</code> или <code>false</code>.
Булевы значения обычно используются для управления потоком выполнения (см. <a href="#_поток_управления">следующая глава</a>), и они часто являются результатом операторов сравнения.</p>
</div>
<div class="paragraph">
<p>Обычное соглашение по именованию булевых переменных — писать их как простые вопросы да/нет (true/false), например, <code>isEmpty</code>, <code>isFinished</code>, <code>isMoving</code> и т.д.</p>
</div>
<div class="sect2">
<h3 id="_операторы_сравнения">Операторы сравнения</h3>
<div class="paragraph">
<p>Операторы сравнения проверяют отношение между двумя сущностями, которые должны быть сравнимы.</p>
</div>
<div class="paragraph">
<p>Чтобы сравнить два значения и определить, равны ли они, используются <code>==</code> (два знака равенства).
Не путайте это с <code>=</code>, который используется для присваивания, как мы видели ранее.</p>
</div>
<div class="paragraph">
<p>Тут все операторы сравнения для целых чисел:</p>
</div>
<div class="listingblock">
<div class="title">relationalOperators.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">g</span> <span class="o">=</span> <span class="mi">31</span>
  <span class="n">h</span> <span class="o">=</span> <span class="mi">99</span>

<span class="n">echo</span> <span class="s">"g is greater than h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">&gt;</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is smaller than h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is equal to h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">==</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is not equal to h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">!=</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is greater or equal to h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">&gt;=</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is smaller or equal to h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">&lt;=</span> <span class="n">h</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">g is greater than h: false
g is smaller than h: true
g is equal to h: false
g is not equal to h: true
g is greater or equal to h: false
g is smaller or equal to h: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Мы также можем использовать эти операторы для сравнения символов (<code>char</code>) и строк (<code>string</code>):</p>
</div>
<div class="listingblock">
<div class="title">relationalOperators.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">i</span> <span class="o">=</span> <span class="sc">'a'</span>
  <span class="n">j</span> <span class="o">=</span> <span class="sc">'d'</span>
  <span class="n">k</span> <span class="o">=</span> <span class="sc">'Z'</span>

<span class="n">echo</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">j</span>
<span class="n">echo</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">k</span>  <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span>
  <span class="n">m</span> <span class="o">=</span> <span class="s">"axyb"</span>
  <span class="n">n</span> <span class="o">=</span> <span class="s">"axyz"</span>
  <span class="n">o</span> <span class="o">=</span> <span class="s">"ba"</span>
  <span class="n">p</span> <span class="o">=</span> <span class="s">"ba "</span>

<span class="n">echo</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="n">n</span>  <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">o</span>  <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="n">o</span> <span class="o">&lt;</span> <span class="n">p</span>  <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Все заглавные буквы идут перед строчными буквами.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Сравнение строк происходит посимвольно. Первые три символа одинаковы, и символ <code>b</code> меньше символа <code>z</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Длина строки не влияет на сравнение, если символы не совпадают.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Короткая строка меньше длинной строки.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">true
false
true
true
true</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_логические_операторы">Логические операторы</h3>
<div class="paragraph">
<p>Логические операторы используются для проверки истинности выражения, состоящего из одного или нескольких булевых значений.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Логическое <code>and</code> возвращает <code>true</code> только если оба члена равны <code>true</code></p>
</li>
<li>
<p>Логическое <code>or</code> возвращает <code>true</code>, если хотя бы один член равен <code>true</code></p>
</li>
<li>
<p>Логическое <code>xor</code> возвращает <code>true</code>, если один член равен <code>true</code>, но другой нет</p>
</li>
<li>
<p>Логическое <code>not</code> отрицает истинность своего члена: меняет <code>true</code> на <code>false</code>, и наоборот (это единственный логический оператор, который принимает только один операнд)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">logicalOperators.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"T and T: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">and</span> <span class="kp">true</span>
<span class="n">echo</span> <span class="s">"T and F: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">and</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"F and F: "</span><span class="p">,</span> <span class="kp">false</span> <span class="ow">and</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"---"</span>
<span class="n">echo</span> <span class="s">"T or T: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">or</span> <span class="kp">true</span>
<span class="n">echo</span> <span class="s">"T or F: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">or</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"F or F: "</span><span class="p">,</span> <span class="kp">false</span> <span class="ow">or</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"---"</span>
<span class="n">echo</span> <span class="s">"T xor T: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">xor</span> <span class="kp">true</span>
<span class="n">echo</span> <span class="s">"T xor F: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">xor</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"F xor F: "</span><span class="p">,</span> <span class="kp">false</span> <span class="ow">xor</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"---"</span>
<span class="n">echo</span> <span class="s">"not T: "</span><span class="p">,</span> <span class="ow">not</span> <span class="kp">true</span>
<span class="n">echo</span> <span class="s">"not F: "</span><span class="p">,</span> <span class="ow">not</span> <span class="kp">false</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">T and T: true
T and F: false
F and F: false
---
T or T: true
T or F: true
F or F: false
---
T xor T: false
T xor F: true
F xor F: false
---
not T: false
not F: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Операторы сравнения и логические операторы могут быть использованы вместе для создания более сложных выражений.</p>
</div>
<div class="paragraph">
<p>Например: <code>(5 &lt; 7) and (11 + 9 == 32 - 2*6)</code> станет <code>true and (20 == 20)</code>, что станет <code>true and true</code>, и в конце это даст окончательный результат <code>true</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_заключение">Заключение</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Эта глава была самой длинной в этом Туториале, и мы охватили много материала.
Не торопитесь, чтобы пройтись по каждому типу данных и поэкспериментировать с тем, что вы можете сделать с каждым из них.</p>
</div>
<div class="paragraph">
<p>Типы могут показаться ограничением на первый взгляд, но они позволяют компилятору Nim как ускорить ваш код, так и убедиться, что вы не делаете что-то неправильно по ошибке — это особенно полезно в больших кодовых базах.</p>
</div>
<div class="paragraph">
<p>Теперь вы знаете основные типы данных и несколько операций над ними, чего должно быть достаточно, чтобы выполнять простые вычисления в Nim.
Проверьте свои знания, выполнив следующие упражнения.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_упражнения">Упражнения</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Создайте неизменяемую переменную, содержащую ваш возраст (в годах). Выведите ваш возраст в днях. (1 год = 365 дней)</p>
</li>
<li>
<p>Проверьте, делится ли ваш возраст на 3 без остатка. (Подсказка: используйте <code>mod</code>)</p>
</li>
<li>
<p>Создайте неизменяемую переменную, содержащую ваш рост в сантиметрах. Выведите ваш рост в дюймах. (1 дюйм = 2.54 см)</p>
</li>
<li>
<p>Труба имеет диаметр 3/8 дюйма. Выразите диаметр в сантиметрах.</p>
</li>
<li>
<p>Создайте неизменяемую переменную, содержащую ваше имя, и еще одну переменную, содержащую вашу фамилию. Создайте переменную <code>fullName</code>, объединив предыдущие две переменные. Не забудьте поставить пробел между ними. Выведите ваше полное имя.</p>
</li>
<li>
<p>Алиса зарабатывает $400 каждые 15 дней. Боб зарабатывает $3.14 в час и работает 8 часов в день, 7 дней в неделю. Через 30 дней Алиса заработала больше, чем Боб? (Подсказка: используйте операторы сравнения)</p>
</li>
</ol>
</div>
</div>
</div>
<h1 id="_поток_управления" class="sect0">Поток управления</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>До сих пор в наших программах каждая строка кода выполнялась в тот или иной момент.
Операторы потока управления позволяют нам иметь части кода, которые будут выполняться только если удовлетворяется некоторое булево условие.</p>
</div>
<div class="paragraph">
<p>Если мы представим нашу программу как дорогу, то поток управления можно представить как различные развилки, и мы выбираем наш путь в зависимости от некоторого условия.
Например, мы купим яйца только <em>если</em> их цена меньше некоторого значения.
Или, <em>если</em> идет дождь, мы возьмем зонт, <em>иначе</em> (<em>иначе</em>) мы возьмем солнечные очки.</p>
</div>
<div class="paragraph">
<p>Написаныные в <a href="https://en.wikipedia.org/wiki/Pseudocode">pseudocode</a>, эти два примера будут выглядеть примерно так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">if</span> <span class="n">eggPrice</span> <span class="o">&lt;</span> <span class="n">wantedPrice</span><span class="p">:</span>
  <span class="n">buyEggs</span>

<span class="k">if</span> <span class="n">isRaining</span><span class="p">:</span>
  <span class="n">bring</span> <span class="n">umbrella</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">bring</span> <span class="n">sunglasses</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Синтаксис Nim очень похож, как вы увидите ниже.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_оператор_if">Оператор If</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Оператор <code>if</code>, как показано выше, является самым простым способом разветвления нашей программы.</p>
</div>
<div class="paragraph">
<p>Синтаксис Nim для написания оператора <code>if</code> выглядит следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">if</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span><span class="p">:</span>     <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="o">&lt;</span><span class="n">indented</span> <span class="k">block</span><span class="o">&gt;</span>  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>condition</code> должно быть булевого типа: либо булевая переменная, либо сравнение и/или логическое выражение.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Все строки, следующие за строкой <code>if</code>, которые отступлены на два пробела, составляют один блок и будут выполнены только если условие <code>true</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Операторы if могут быть вложенными, т.е. внутри одного блока if может находиться другой оператор if.</p>
</div>
<div class="listingblock">
<div class="title">if.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">11</span>
  <span class="n">b</span> <span class="o">=</span> <span class="mi">22</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mi">999</span>

<span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"a is smaller than b"</span>
  <span class="k">if</span> <span class="mi">10</span><span class="o">*</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">:</span>  <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="n">echo</span> <span class="s">"not only that, a is *much* smaller than b"</span>

<span class="k">if</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"b is smaller than c"</span>
  <span class="k">if</span> <span class="mi">10</span><span class="o">*</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">:</span>  <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="n">echo</span> <span class="s">"not only that, b is *much* smaller than c"</span>

<span class="k">if</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">:</span>     <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="n">echo</span> <span class="s">"a and b are larger than c"</span>
  <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">100</span> <span class="ow">and</span> <span class="mi">321</span> <span class="o">&gt;</span> <span class="mi">123</span><span class="p">:</span>  <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="n">echo</span> <span class="s">"did you know that 1 is smaller than 100?"</span>
    <span class="n">echo</span> <span class="s">"and 321 is larger than 123! wow!"</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Первое условие истинно, второе ложно&#8201;&#8212;&#8201;внутренний <code>echo</code> не выполняется.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Оба условия истинны и обе строки печатаются.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Первое условие ложно&#8201;&#8212;&#8201;все строки внутри блока будут пропущены, ничего не напечатается.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Использование логического <code>and</code> внутри оператора <code>if</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">a is smaller than b
b is smaller than c
not only that, b is *much* smaller than c</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_else">Else</h3>
<div class="paragraph">
<p>Else следует за if-блоком и позволяет нам иметь ветку кода, которая будет выполнена, когда условие в операторе if не истинно.</p>
</div>
<div class="listingblock">
<div class="title">else.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">d</span> <span class="o">=</span> <span class="mi">63</span>
  <span class="n">e</span> <span class="o">=</span> <span class="mf">2.718</span>

<span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"d is a small number"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"d is a large number"</span>

<span class="k">if</span> <span class="n">e</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"e is a small number"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"e is a large number"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">d is a large number
e is a small number</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Если вы хотите выполнить блок, если условие <code>false</code>, вы можете просто отрицать условие с помощью оператора <code>not</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_elif">Elif</h3>
<div class="paragraph">
<p>Elif это сокращение для "else if", и позволяет нам объединять несколько операторов if.</p>
</div>
<div class="paragraph">
<p>Программа тестирует каждое условие до тех пор, пока не найдет истинное.
После этого все последующие условия игнорируются.</p>
</div>
<div class="listingblock">
<div class="title">elif.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">f</span> <span class="o">=</span> <span class="mi">3456</span>
  <span class="n">g</span> <span class="o">=</span> <span class="mi">7</span>

<span class="k">if</span> <span class="n">f</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"f is smaller than 10"</span>
<span class="k">elif</span> <span class="n">f</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"f is between 10 and 100"</span>
<span class="k">elif</span> <span class="n">f</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"f is between 100 and 1000"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"f is larger than 1000"</span>

<span class="k">if</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"g is smaller than 1000"</span>
<span class="k">elif</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"g is smaller than 100"</span>
<span class="k">elif</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"g is smaller than 10"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">f is larger than 1000
g is smaller than 1000</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
В случае <code>g</code>, даже если <code>g</code> удовлетворяет всем трем условиям, выполняется только первая ветка, автоматически пропуская все остальные ветки.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_case">Case</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Оператор case является другим способом выбрать один из нескольких возможных путей, аналогично оператору if с несколькими <code>elif</code>.
Оператор <code>case</code>, однако, не принимает несколько булевых условий, а принимает любое значение с различными состояниями и путь для каждого возможного значения.</p>
</div>
<div class="paragraph">
<p>Код, написанный в блоке if-elif выглядит так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Five!"</span>
<span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Seven!"</span>
<span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Ten!"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"unknown number"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>может быть написан с использованием оператора case следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">case</span> <span class="n">x</span>
<span class="k">of</span> <span class="mi">5</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Five!"</span>
<span class="k">of</span> <span class="mi">7</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Seven!"</span>
<span class="k">of</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Ten!"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"unknown number"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>В отличии от оператора if, оператор case должен покрывать <em>все</em> возможные случаи.
Если вы не заинтересованы в некоторых из этих случаев, можно использовать <code>else: discard</code>.</p>
</div>
<div class="listingblock">
<div class="title">case.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">h</span> <span class="o">=</span> <span class="sc">'y'</span>

<span class="k">case</span> <span class="n">h</span>
<span class="k">of</span> <span class="sc">'x'</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"You've chosen x"</span>
<span class="k">of</span> <span class="sc">'y'</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"You've chosen y"</span>
<span class="k">of</span> <span class="sc">'z'</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"You've chosen z"</span>
<span class="k">else</span><span class="p">:</span> <span class="k">discard</span>  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Даже если мы заинтересованы только в трех значениях <code>h</code>, мы должны включить эту строку, чтобы покрыть все остальные возможные случаи (все другие символы). Без нее код не скомпилируется.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">You've chosen y</code></pre>
</div>
</div>
<div class="paragraph">
<p>Мы также можем использовать несколько значений для каждой ветки, если для более чем одного значения должно произойти одно и то же действие.</p>
</div>
<div class="listingblock">
<div class="title">multipleCase.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">7</span>

<span class="k">case</span> <span class="n">i</span>
  <span class="k">of</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">echo</span> <span class="s">"i is zero"</span>
  <span class="k">of</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span>
    <span class="n">echo</span> <span class="s">"i is odd"</span>
  <span class="k">of</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span>
    <span class="n">echo</span> <span class="s">"i is even"</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">echo</span> <span class="s">"i is too large"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">i is odd</code></pre>
</div>
</div>
</div>
</div>
<h1 id="_циклы" class="sect0">Циклы</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Циклы являются еще одной конструкцией управления потоком, которая позволяет нам выполнять некоторые части кода несколько раз.</p>
</div>
<div class="paragraph">
<p>В этом разделе мы познакомимся с двумя видами циклов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Цикл for: Запускается известное количество раз</p>
</li>
<li>
<p>Цикл while: Запускается до тех пор, пока некоторое условие истинно</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_цикл_for">Цикл For</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Синтаксис цикла for выглядит следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="o">&lt;</span><span class="err">переменная_цикла&gt; in &lt;итерируемый_объект&gt;:</span>
  <span class="o">&lt;</span><span class="err">тело_цикла&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Традиционно, <code>i</code> часто используется в качестве имени <code>переменная_цикла</code>, но может быть использовано любое другое имя.
Эта переменная будет доступна только внутри цикла.
После завершения цикла значение переменной отбрасывается.</p>
</div>
<div class="paragraph">
<p><code>Итерируемый_объект</code> (или просто <code>итерируемый</code>) - это объект, содержащий несколько значений, по которым мы хотим пройтись в цикле.
Как в Основных типах данных было упомянуто ранее, строки это итерируемый объект.
(Больше итерируемых типов будут представлены в <a href="#_контейнеры">следующая глава</a>.)</p>
</div>
<div class="paragraph">
<p>Все строки в <code>теле_цикла</code> выполняются при каждой итерации цикла, что позволяет эффективно писать повторяющиеся части кода.</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Если мы хотим итерироваться по диапазону (целых) чисел в Nim, синтаксис для <code>итерируемого</code> это <code>start .. finish</code>, где <code>start</code> и <code>finish</code> это числа.
Это будет итерироваться по всем числам между <code>start</code> и <code>finish</code>, включая оба <code>start</code> и <code>finish</code>.
Для итерируемого по умолчанию диапазона, <code>start</code> должен быть меньше чем <code>finish</code>.</p>
</div>
<div class="paragraph">
<p>Есди мы хотим итерироваться <em>до</em> числа (не включая его), мы можем использовать <code>..&lt;</code>:</p>
</div>
<div class="listingblock">
<div class="title">for1.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="mi">5</span> <span class="p">..</span> <span class="mi">9</span><span class="p">:</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">echo</span> <span class="n">n</span>

<span class="n">echo</span> <span class="s">""</span>

<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="mi">5</span> <span class="p">..</span><span class="o">&lt;</span> <span class="mi">9</span><span class="p">:</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">echo</span> <span class="n">n</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Итерируя по диапазону чисел с помощью <code>..</code>&#8201;&#8212;&#8201;оба конца будут включены в диапазон.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Итерируя по тому же диапазону с помощью <code>..&lt;</code>&#8201;&#8212;&#8201;итерирование происходит до верхней границы, не включая её.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">5
6
7
8
9

5
6
7
8</code></pre>
</div>
</div>
<div class="paragraph">
<p>Если мы хотим итерироваться по диапазону чисел с шагом, отличным от одного, используется <code>countup</code>. С помощью <code>countup</code> мы определяем начальное значение, конечное значение (включенное в диапазон) и размер шага.</p>
</div>
<div class="listingblock">
<div class="title">for2.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">countup</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">echo</span> <span class="n">n</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Счётчик от нуля до 16 с шагом 4. Конечное значение (16) включено в диапазон.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">0
4
8
12
16</code></pre>
</div>
</div>
<div class="paragraph">
<p>Чтобы итерироваться по диапазону чисел, где <code>start</code> больше чем <code>finish</code>, используется похожая функция под названием <code>countdown</code>.
Даже если мы считаем вниз, размер шага должен быть положительным.</p>
</div>
<div class="listingblock">
<div class="title">for2.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">countdown</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>       <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">echo</span> <span class="n">n</span>

<span class="n">echo</span> <span class="s">""</span>

<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">countdown</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">echo</span> <span class="n">n</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Чтобы итерироваться от большего к меньшему числу, мы должны использовать <code>countdown</code> (оператор <code>..</code> может быть использован только когда начальное значение меньше конечного).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Даже при обратном отсчете размер шага должен быть положительным.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">4
3
2
1
0

-3
-5
-7
-9</code></pre>
</div>
</div>
<div class="paragraph">
<p>Поскольку строка является итерируемым объектом, мы можем использовать цикл for, чтобы итерироваться по каждому символу строки (такой вид итерации иногда называют <em>for-each</em> циклом).</p>
</div>
<div class="listingblock">
<div class="title">for3.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">word</span> <span class="o">=</span> <span class="s">"alphabet"</span>

<span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
  <span class="n">echo</span> <span class="n">letter</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">a
l
p
h
a
b
e
t</code></pre>
</div>
</div>
<div class="paragraph">
<p>Если нам также нужно иметь счетчик итераций (начинающийся с нуля), мы можем достичь этого, используя синтаксис <code>for &lt;переменнаяСчетчика&gt;, &lt;переменнаяЦикла&gt; in &lt;итерируемый&gt;:</code>.
Ланный способ очень практичекие если вы желаеье итерировать один iterable, и одновременно получать доступ к другому iterable на том же смещении.</p>
</div>
<div class="listingblock">
<div class="title">for3.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"letter "</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">" is: "</span><span class="p">,</span> <span class="n">letter</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">letter 0 is: a
letter 1 is: l
letter 2 is: p
letter 3 is: h
letter 4 is: a
letter 5 is: b
letter 6 is: e
letter 7 is: t</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_цикл_while">Цикл While</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Цикл While похож на условный оператор if, но он продолжает выполнять свой блок кода до тех пор, пока условие остается истинным.
Они используются, когда мы заранее не знаем, сколько раз цикл будет выполняться.</p>
</div>
<div class="paragraph">
<p>Мы должны убедиться, что цикл в какой-то момент завершится и не станет <a href="https://ru.wikipedia.org/wiki/%D0%91%D0%B5%D1%81%D0%BA%D0%BE%D0%BD%D0%B5%D1%87%D0%BD%D1%8B%D0%B9_%D1%86%D0%B8%D0%BA%D0%BB">бесконечным циклом</a>.</p>
</div>
<div class="listingblock">
<div class="title">while.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">while</span> <span class="n">a</span><span class="o">*</span><span class="n">a</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">echo</span> <span class="s">"a is: "</span><span class="p">,</span> <span class="n">a</span>
  <span class="n">inc</span> <span class="n">a</span>         <i class="conum" data-value="2"></i><b>(2)</b>

<span class="n">echo</span> <span class="s">"final value of a: "</span><span class="p">,</span> <span class="n">a</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Это условие будет проверяться каждый раз перед входом в новый цикл и выполнением кода внутри него.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>inc</code> используется для увеличения <code>a</code> на единицу. Это то же самое, что и <code>a = a + 1</code> или <code>a += 1</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">a is: 1
a is: 2
a is: 3
final value of a: 4</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_break_и_continue">Break и continue</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Оператор <code>break</code> используется для преждевременного выхода из цикла, обычно если какое-то условие выполняется.</p>
</div>
<div class="paragraph">
<p>В следующем примере, если бы не было условия <code>if</code> с <code>break</code>, цикл продолжился бы и выводил бы значения до тех пор, пока <code>i</code> не станет 1000.
С оператором <code>break</code>, когда <code>i</code> становится 3, мы немедленно выходим из цикла (до вывода значения <code>i</code>).</p>
</div>
<div class="listingblock">
<div class="title">break.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
    <span class="k">break</span>
  <span class="n">echo</span> <span class="n">i</span>
  <span class="n">inc</span> <span class="n">i</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">1
2</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Оператор <code>continue</code> начинает следующую итерацию цикла немедленно, не выполняя оставшиеся строки текущей итерации.
Обратите внимание, что 3 и 6 отсутствуют в выводе следующего кода:</p>
</div>
<div class="listingblock">
<div class="title">continue.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span> <span class="p">..</span> <span class="mi">8</span><span class="p">:</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">6</span><span class="p">):</span>
    <span class="k">continue</span>
  <span class="n">echo</span> <span class="n">i</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">1
2
4
5
7
8</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_упражнения_2">Упражнения</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://ru.wikipedia.org/wiki/%D0%93%D0%B8%D0%BF%D0%BE%D1%82%D0%B5%D0%B7%D0%B0_%D0%9A%D0%BE%D0%BB%D0%BB%D0%B0%D1%82%D1%86%D0%B0">Гипотеза Коллатца</a> это популярная математическая задача с простыми правилами. Сначала выберите число. Если оно нечетное, умножьте его на три и прибавьте один; если четное, разделите его на два. Повторяйте эту процедуру до тех пор, пока не получите единицу. Например: 5 &#8594; нечетное &#8594; 3*5 + 1 = 16 &#8594; четное &#8594; 16 / 2 = 8 &#8594; четное &#8594; 4 &#8594; 2 &#8594; 1 &#8594; конец!<br>
Выберите целое число (как изменяемую переменную) и создайте цикл, который будет печатать каждый шаг гипотезы Коллатца. (Подсказка: используйте <code>div</code> для деления)</p>
</li>
<li>
<p>Создайте неизменяемую переменную, содержащую ваше полное имя. Напишите цикл for, который будет итерировать по этой строке и печатать только гласные (a, e, i, o, u). (Подсказка: используйте оператор <code>case</code> с несколькими значениями ветви)</p>
</li>
<li>
<p><a href="https://ru.wikipedia.org/wiki/Fizz_buzz">Fizz buzz</a> это детская игра, иногда используемая для проверки базовых знаний программирования. Мы считаем числа от одного вверх. Если число делится на 3, замените его на <em>fizz</em>, если оно делится на 5, замените его на <em>buzz</em>, а если число делится на 15 (оба 3 и 5), замените его на <em>fizzbuzz</em>. Первые несколько раундов будут выглядеть так: 1, 2, fizz, 4, buzz, fizz, 7, &#8230;&#8203;<br>
Создайте программу, которая будет печатать первые 30 раундов Fizz buzz. (Подсказка: обратите внимание на порядок проверок делимости)</p>
</li>
<li>
<p>В предыдущих упражнениях вы конвертировали дюймы в сантиметры и наоборот. Создайте таблицу конвертации с несколькими значениями. Например, таблица может выглядеть так:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="ow">in</span>	<span class="o">|</span> <span class="n">cm</span>
<span class="o">----------------</span>
<span class="mi">1</span>	<span class="o">|</span> <span class="mf">2.54</span>
<span class="mi">4</span>	<span class="o">|</span> <span class="mf">10.16</span>
<span class="mi">7</span>	<span class="o">|</span> <span class="mf">17.78</span>
<span class="mi">10</span>	<span class="o">|</span> <span class="mf">25.4</span>
<span class="mi">13</span>	<span class="o">|</span> <span class="mf">33.02</span>
<span class="mi">16</span>	<span class="o">|</span> <span class="mf">40.64</span>
<span class="mi">19</span>	<span class="o">|</span> <span class="mf">48.26</span></code></pre>
</div>
</div>
</div>
</div>
<h1 id="_контейнеры" class="sect0">Контейнеры</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Контейнеры это типы данных, которые содержат коллекцию элементов и позволяют нам получить доступ к этим элементам.
Обычно контейнер также является итерируемым, что означает, что мы можем использовать их так же, как строки в главе <a href="#_циклы">Циклы</a>.</p>
</div>
<div class="paragraph">
<p>Например, список покупок - это контейнер элементов, которые мы хотим купить, а список простых чисел - это контейнер чисел.
Написано в псевдокоде:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">groceryList</span> <span class="o">=</span> <span class="o">[</span><span class="n">ham</span><span class="p">,</span> <span class="n">eggs</span><span class="p">,</span> <span class="n">bread</span><span class="p">,</span> <span class="n">apples</span><span class="o">]</span>
<span class="n">primes</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="o">]</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_массивы">Массивы</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Массив - это самый простой тип контейнера.
Массивы однородны, т.е. все элементы в массиве должны иметь одинаковый тип.
Массивы также имеют постоянный размер, что означает, что количество элементов (или скорее: количество <em>возможных</em> элементов) должно быть известно на этапе компиляции.
Это означает, что мы называем массивы "однородным контейнером постоянной длины".</p>
</div>
<div class="paragraph">
<p>Тип массива объявляется с помощью <code>array[&lt;length&gt;, &lt;type&gt;]</code>, где <code>length</code> - это общая емкость массива (количество элементов, которое он может содержать), а <code>type</code> - тип всех его элементов.
Объявление может быть опущено, если и длина, и тип могут быть выведены из переданных элементов..</p>
</div>
<div class="paragraph">
<p>Элементы массива заключены внутри квадратных скобок.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">a</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="mi">3</span><span class="p">,</span> <span class="kt">int</span><span class="o">]</span> <span class="o">=</span> <span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="o">]</span>
  <span class="n">b</span> <span class="o">=</span> <span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="o">]</span>        <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">c</span> <span class="o">=</span> <span class="o">[]</span>  <span class="c"># error      </span><i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">d</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="mi">7</span><span class="p">,</span> <span class="kt">string</span><span class="o">]</span>  <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Если мы предоставляем значения, длина и тип массива <code>b</code> известны на этапе компиляции. Хотя это корректно, нет необходимости специально объявлять его как массив <code>a</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Ни длина, ни тип элементов не могут быть выведены из этого типа объявления&#8201;&#8212;&#8201;это приводит к ошибке.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Правильный способ объявить пустой массив (который будет заполнен позже) - это указать его длину и тип, не предоставляя значения его элементов&#8201;&#8212;&#8201;массив <code>d</code> может содержать семь строк.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Так как длина массива должна быть известна на этапе компиляции, это не сработает:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">const</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">let</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>

<span class="k">var</span> <span class="n">a</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="n">m</span><span class="p">,</span> <span class="kt">char</span><span class="o">]</span>
<span class="k">var</span> <span class="n">b</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="n">n</span><span class="p">,</span> <span class="kt">char</span><span class="o">]</span> <span class="c"># error </span><i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Это приводит к ошибке, потому что <code>n</code> объявлен с помощью <code>let</code>&#8201;&#8212;&#8201;его значение неизвестно на этапе компиляции. Мы можем использовать только значения, объявленные с помощью <code>const</code>, как параметр <code>length</code> для инициализации массива.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_последовательность">Последовательность</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Последовательности - это контейнеры, похожие на массивы, но их длина не обязательно должна быть известна на этапе компиляции, и она может изменяться во время выполнения: мы объявляем только тип содержащихся элементов с помощью <code>seq[&lt;type&gt;]</code>.
Последовательности также являются однородными, т.е. каждый элемент в последовательности должен быть одного типа.</p>
</div>
<div class="paragraph">
<p>Элементы последовательности заключены между <code>@[</code> и <code>]</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">e1</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span> <span class="o">=</span> <span class="o">@[]</span>   <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">f</span> <span class="o">=</span> <span class="o">@[</span><span class="s">"abc"</span><span class="p">,</span> <span class="s">"def"</span><span class="o">]</span>  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Тип пустой последовательности должен быть объявлен.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Тип непустой последовательности может быть автоматически выведен. В этом случае, это последовательность, содержащая строки.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Другой способ инициализации пустой последовательности - вызвать процедуру <code>newSeq</code>. Мы рассмотрим вызовы процедур в <a href="#_процедуры">следующей главе</a>, но пока просто знайте, что это также возможно:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">e</span> <span class="o">=</span> <span class="n">newSeq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span><span class="p">()</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Предоставление типа параметра внутри квадратных скобок позволяет процедуре знать, что она должна вернуть последовательность определенного типа.<br>
Частая ошибка - пропуск конечных <code>()</code>, которые должны быть включены.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Мы можем добавлять новые элементы в последовательность с помощью функции <code>add</code>, аналогично тому, как мы это делали со строками.
Для этого последовательность должна быть изменяемой (объявленной с помощью <code>var</code>), и добавляемый элемент должен быть того же типа, что и элементы в последовательности.</p>
</div>
<div class="listingblock">
<div class="title">seq.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">g</span> <span class="o">=</span> <span class="o">@[</span><span class="sc">'x'</span><span class="p">,</span> <span class="sc">'y'</span><span class="o">]</span>
  <span class="n">h</span> <span class="o">=</span> <span class="o">@[</span><span class="sc">'1'</span><span class="p">,</span> <span class="sc">'2'</span><span class="p">,</span> <span class="sc">'3'</span><span class="o">]</span>

<span class="n">g</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="sc">'z'</span><span class="p">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">g</span>

<span class="n">h</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>    <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">h</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Добавление нового элемента того же типа (char).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Добавление другой последовательности, содержащей тот же тип.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@['x', 'y', 'z']
@['1', '2', '3', 'x', 'y', 'z']</code></pre>
</div>
</div>
<div class="paragraph">
<p>Попытка передать разные типы в существующие последовательности приведет к ошибке:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">i</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="o">]</span>

<span class="n">i</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="mf">9.81</span><span class="p">)</span> <span class="c"># error </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">g</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>    <span class="c"># error </span><i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Попытка добавить <code>float</code> к последовательности <code>int</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Попытка добавить последовательность <code>int</code> к последовательности <code>char</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>С учетом того что последовательности могут изменять свою длину во время выполнения, нам нужен способ узнать их длину.  Для этого мы можем использовать функцию <code>len</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">i</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="o">]</span>
<span class="n">echo</span> <span class="n">i</span><span class="p">.</span><span class="n">len</span>

<span class="n">i</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">i</span><span class="p">.</span><span class="n">len</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">3
4</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_индексация_и_срезы">Индексация и срезы</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Индексация позволяет нам получить конкретный элемент из контейнера по его индексу.
Думайте об индексе как о позиции внутри контейнера.</p>
</div>
<div class="paragraph">
<p>Nim, как и многие другие языки программирования, использует индексацию с нулевым основанием, что означает, что первый элемент в контейнере имеет индекс ноль, второй элемент имеет индекс один и так далее.</p>
</div>
<div class="paragraph">
<p>Если мы хотим получить элемент "с конца", это делается с помощью префикса <code>^</code>.
Последний элемент (первый с конца) имеет индекс <code>^1</code>. Второй с конца имеет индекс <code>^2</code> и так далее.
Синтаксис для индексации: <code>&lt;container&gt;[&lt;index&gt;]</code>.</p>
</div>
<div class="listingblock">
<div class="title">indexing.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">j</span> <span class="o">=</span> <span class="o">[</span><span class="sc">'a'</span><span class="p">,</span> <span class="sc">'b'</span><span class="p">,</span> <span class="sc">'c'</span><span class="p">,</span> <span class="sc">'d'</span><span class="p">,</span> <span class="sc">'e'</span><span class="o">]</span>

<span class="n">echo</span> <span class="n">j</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>   <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">j</span><span class="o">[</span><span class="p">^</span><span class="mi">1</span><span class="o">]</span>  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Индексация с нулевым основанием: элемент с индексом 1 - это <code>b</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Получение последнего элемента.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">b
e</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Срезы позволяют нам получить серию элементов за один вызов.
Он использует тот же синтаксис, что и диапазоны (введенные в <a href="#_циклы">цикл for</a>).</p>
</div>
<div class="paragraph">
<p>Если мы используем синтаксис <code>start .. stop</code>, оба конца включаются в срез.
Используя синтаксис <code>start ..&lt; stop</code>, индекс <code>stop</code> не включается в срез.</p>
</div>
<div class="paragraph">
<p>Синтаксис для срезов: <code>&lt;container&gt;[&lt;start&gt; .. &lt;stop&gt;]</code>.</p>
</div>
<div class="listingblock">
<div class="title">indexing.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="n">j</span><span class="o">[</span><span class="mi">0</span> <span class="p">..</span> <span class="mi">3</span><span class="o">]</span>
<span class="n">echo</span> <span class="n">j</span><span class="o">[</span><span class="mi">0</span> <span class="p">..</span><span class="o">&lt;</span> <span class="mi">3</span><span class="o">]</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@[a, b, c, d]
@[a, b, c]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Как индексация, так и срезы могут быть использованы для присвоения новых значений существующим изменяемым контейнерам и строкам.</p>
</div>
<div class="listingblock">
<div class="title">assign.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">k</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="kt">int</span><span class="o">]</span>
  <span class="n">l</span> <span class="o">=</span> <span class="o">@[</span><span class="sc">'p'</span><span class="p">,</span> <span class="sc">'w'</span><span class="p">,</span> <span class="sc">'r'</span><span class="o">]</span>
  <span class="n">m</span> <span class="o">=</span> <span class="s">"Tom and Jerry"</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">0</span> <span class="p">..</span> <span class="mi">4</span><span class="p">:</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">k</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">*</span> <span class="n">i</span>
<span class="n">echo</span> <span class="n">k</span>

<span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="sc">'q'</span>        <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">l</span>

<span class="n">m</span><span class="o">[</span><span class="mi">8</span> <span class="p">..</span> <span class="mi">9</span><span class="o">]</span> <span class="o">=</span> <span class="s">"Ba"</span>  <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="n">m</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Массив длины 5 имеет индексы от нуля до четырех. Мы присвоим значение каждому элементу массива.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Присваивание (изменение) второго элемента (индекс 1) последовательности.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Изменение символов строки по индексам 8 и 9.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">[0, 7, 14, 21, 28]
@['p', 'q', 'r']
Tom and Barry</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_кортежи">Кортежи</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Оба контейнера, которые мы видели до сих пор, были однородными.
Кортежи, с другой стороны, содержат разнородные данные, т.е. элементы кортежа могут быть разных типов.
Аналогично массивам, кортежи имеют фиксированный размер.</p>
</div>
<div class="paragraph">
<p>Елементы кортежа заключены внутри круглых скобок.</p>
</div>
<div class="listingblock">
<div class="title">tuples.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="s">"Banana"</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="sc">'c'</span><span class="p">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">n</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Кортежи могут содержать поля разных типов. В этом случае: <code>string</code>, <code>int</code>, и <code>char</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">(Field0: "Banana", Field1: 2, Field2: 'c')</code></pre>
</div>
</div>
<div class="paragraph">
<p>Мы можем также дать имена каждому полю в кортеже, чтобы различать их.
Это может быть использовано для доступа к элементам кортежа, вместо индексации</p>
</div>
<div class="listingblock">
<div class="title">tuples.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">o</span> <span class="o">=</span> <span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="s">"Banana"</span><span class="p">,</span> <span class="n">weight</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">rating</span><span class="p">:</span> <span class="sc">'c'</span><span class="p">)</span>

<span class="n">o</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="mi">7</span>          <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">o</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Apple"</span>  <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">o</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Изменение значения поля по индексу.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Изменение значения поля по имени.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">(name: "Apple", weight: 7, rating: 'c')</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_упражнения_3">Упражнения</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Создайте пустой массив, который может содержать десять целых чисел.</p>
<div class="ulist">
<ul>
<li>
<p>Заполните этот массив числами 10, 20, &#8230;&#8203;, 100. (Подсказка: используйте циклы)</p>
</li>
<li>
<p>Выведите только элементы этого массива, которые находятся на нечетных индексах (значения 20, 40, &#8230;&#8203;).</p>
</li>
<li>
<p>Умножьте элементы на четных индексах на 5. Выведите измененный массив.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Повторите упражнение гипотеза Коллатца, но в этот раз вместо печати каждого шага добавляйте его в последовательность.</p>
<div class="ulist">
<ul>
<li>
<p>Выберите начальное число. Интересные выборы, среди прочего, это 9, 19, 25 и 27.</p>
</li>
<li>
<p>Создайте последовательность, единственным элементом которой является начальное число</p>
</li>
<li>
<p>Используя ту же логику, что и раньше, продолжайте добавлять элементы в последовательность до достижения 1</p>
</li>
<li>
<p>Выведите длину последовательности и саму последовательность</p>
</li>
</ul>
</div>
</li>
<li>
<p>Найдите число в диапазоне от 2 до 100, которое приведет к самой длинной последовательности Коллатца.</p>
<div class="ulist">
<ul>
<li>
<p>Для каждого числа в заданном диапазоне вычислите его последовательность Коллатца</p>
</li>
<li>
<p>Если длина текущей последовательности больше предыдущей записи, сохраните текущую длину и начальное число как новую запись (вы можете использовать кортеж <code>(longestLength, startingNumber)</code> или две отдельные переменные)</p>
</li>
<li>
<p>Выведите начальное число, которое дает самую длинную последовательность, и ее длину</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<h1 id="_процедуры" class="sect0">Процедуры</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Процедуры или <em>функции</em>, как их называют в некоторых других языках программирования, это части кода, которые выполняют определённую задачу, упакованную в единое целое.
Преимуществом группировки кода таким образом является то, что мы можем <em>вызывать</em> эти процедуры вместо того, чтобы писать весь код заново, когда мы хотим использовать код процедуры.</p>
</div>
<div class="paragraph">
<p>В некоторых из предыдущих глав мы рассматривали гипотезу Коллатца в различных сценариях.
Обёртывая логику гипотезы Коллатца в процедуру, мы могли бы вызывать один и тот же код для всех упражнений.</p>
</div>
<div class="paragraph">
<p>На протяжении мы использовали много встроенных процедур, таких как <code>echo</code> для печати, <code>add</code> для добавления элементов в последовательность, <code>inc</code> для увеличения значения целого числа, <code>len</code> для получения длины контейнера и т.д.
Теперь мы увидим, как создавать и использовать наши собственные процедуры.</p>
</div>
<div class="paragraph">
<p>Некоторые преимущества использования процедур:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Уменьшение дублирования кода</p>
</li>
<li>
<p>Упрощение чтения кода, поскольку мы можем называть части по их функционалу</p>
</li>
<li>
<p>Разбиение сложной задачи на более простые шаги</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Как упоминалось в начале этого раздела, процедуры часто называют функциями в других языках программирования.
Это на самом деле немного неверно, если мы рассмотрим математическое определение функции.
Математические функции принимают набор аргументов (например, <code>f(x, y)</code>, где <code>f</code> - это функция, а <code>x</code> и <code>y</code> - её аргументы) и всегда возвращают один и тот же результат для одних и тех же входных данных.</p>
</div>
<div class="paragraph">
<p>Программные процедуры, с другой стороны, не всегда возвращают один и тот же результат для заданного входа.
Иногда они вообще ничего не возвращают.
Это связано с тем, что наши компьютерные программы могут хранить состояние в переменных, которые мы упоминали ранее, и которые процедуры могут читать и изменять.
В Nim слово <code>func</code> зарезервировано для использования как более математически корректный вид функции, который не допускает побочных эффектов.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_объявление_процедуры">Объявление процедуры</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Прежде мы чем сможем использовать (вызывать) нашу процедуру, нам нужно её создать и определить, что она делает.</p>
</div>
<div class="paragraph">
<p>Процедура объявляется с помощью ключевого слова <code>proc</code> и имени процедуры, за которым следуют входные параметры и их тип в круглых скобках, а последняя часть - это двоеточие и тип значения, возвращаемого процедурой, вот так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="err">&lt;</span><span class="nf">name</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">p1</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">type1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">p2</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">type2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...):</span> <span class="o">&lt;</span><span class="n">returnType</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Тело процедуры пишется в отступе после объявления с добавленным знаком <code>=</code>.</p>
</div>
<div class="listingblock">
<div class="title">callProcs.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">findMax</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="k">else</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">y</span>
  <span class="c"># this is inside of the procedure</span>
<span class="c"># this is outside of the procedure</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Объявление процедуры с именем <code>findMax</code>, которая имеет два параметра, <code>x</code> и <code>y</code>, и возвращает значение типа <code>int</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Чтобы вернуть значение из процедуры, мы используем ключевое слово <code>return</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">echoLanguageRating</span><span class="p">(</span><span class="n">language</span><span class="p">:</span> <span class="kt">string</span><span class="p">)</span> <span class="o">=</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">case</span> <span class="n">language</span>
  <span class="k">of</span> <span class="s">"Nim"</span><span class="p">,</span> <span class="s">"nim"</span><span class="p">,</span> <span class="s">"NIM"</span><span class="p">:</span>
    <span class="n">echo</span> <span class="n">language</span><span class="p">,</span> <span class="s">" is the best language!"</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">echo</span> <span class="n">language</span><span class="p">,</span> <span class="s">" might be a second-best language."</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Процедура <code>echoLanguageRating</code> просто выводит заданное имя, она не возвращает ничего, поэтому тип возвращаемого значения не объявляется.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Обычно мы не можем изменять какие-либо параметры, которые нам передали.
Творение чего-то подобного приведет к ошибке:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">changeArgument</span><span class="p">(</span><span class="n">argument</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">=</span>
  <span class="n">argument</span> <span class="o">+=</span> <span class="mi">5</span>

<span class="k">var</span> <span class="n">ourVariable</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">changeArgument</span><span class="p">(</span><span class="n">ourVariable</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Что бы сделать это возможным, нам нужно разрешить Nim и программисту, использующему нашу процедуру, изменять аргумент, объявив его как переменную:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">changeArgument</span><span class="p">(</span><span class="n">argument</span><span class="p">:</span> <span class="k">var</span> <span class="kt">int</span><span class="p">)</span> <span class="o">=</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">argument</span> <span class="o">+=</span> <span class="mi">5</span>

<span class="k">var</span> <span class="n">ourVariable</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">changeArgument</span><span class="p">(</span><span class="n">ourVariable</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">ourVariable</span>
<span class="n">changeArgument</span><span class="p">(</span><span class="n">ourVariable</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">ourVariable</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Обратите внимание, как <code>argument</code> теперь объявлен как <code>var int</code>, а не просто как <code>int</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">15
20</code></pre>
</div>
</div>
<div class="paragraph">
<p>Это естественно означает что имя, которое мы передаем, также должно быть объявлено как переменная, передача чего-то присвоенного с <code>const</code> или <code>let</code> вызовет ошибку.</p>
</div>
<div class="paragraph">
<p>Хорошей практикой является передача аргументов в процедуры, но также возможно использовать имена, объявленные вне процедуры, как переменные, так и константы:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">proc </span><span class="nf">echoX</span><span class="p">()</span> <span class="o">=</span>
  <span class="n">echo</span> <span class="n">x</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>  <i class="conum" data-value="2"></i><b>(2)</b>

<span class="n">echoX</span><span class="p">()</span>
<span class="n">echoX</span><span class="p">()</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Тут мы обращаемся к внешней переменной <code>x</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Мы также можем обновить её значение, поскольку она объявлена как переменная.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="mi">100</span>
<span class="mi">101</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_вызов_процедуры">Вызов процедуры</h2>
<div class="sectionbody">
<div class="paragraph">
<p>После того, как мы объявили процедуру, мы можем её вызвать.
Обычный способ вызова процедур/функций во многих языках программирования - указать её имя и предоставить аргументы в круглых скобках, вот так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="o">&lt;</span><span class="n">procName</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Результат от вызова процедуры может быть сохранен в переменной.</p>
</div>
<div class="paragraph">
<p>Если мы хотим вызвать нашу процедуру <code>findMax</code> из приведенного выше примера и сохранить возвращаемое значение в переменной, мы можем сделать это так:</p>
</div>
<div class="listingblock">
<div class="title">callProcs.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">findMax</span><span class="p">(</span><span class="mi">987</span><span class="p">,</span> <span class="mi">789</span><span class="p">)</span>
  <span class="n">b</span> <span class="o">=</span> <span class="n">findMax</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">321</span><span class="p">)</span>
  <span class="n">c</span> <span class="o">=</span> <span class="n">findMax</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">echo</span> <span class="n">a</span>
<span class="n">echo</span> <span class="n">b</span>
<span class="n">echo</span> <span class="n">c</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Результат от функции <code>findMax</code> здесь называется <code>c</code>, и вызывается с результатами наших первых двух вызовов (<code>findMax(987, 321)</code>).</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">987
321
987</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Nim также, в отличие от многих других языков, поддерживает <a href="https://en.wikipedia.org/wiki/Uniform_Function_Call_Syntax">Унифицированный синтаксис вызова функций</a>, который позволяет использовать множество различных способов вызова процедур.</p>
</div>
<div class="paragraph">
<p>Этот вызов похож на обычный вызов процедуры, но первый аргумент записывается перед именем функции и остальные параметры указываются в круглых скобках:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">.</span><span class="o">&lt;</span><span class="n">procName</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Мы использовали этот синтаксис, когда добавляли элементы в существующую последовательность (<code>&lt;seq&gt;.add(&lt;element&gt;)</code>), так как это делает его более читаемым и выражает наше намерение более ясно, чем запись <code>add(&lt;seq&gt;, &lt;element&gt;)</code>.
Мы также можем опустить круглые скобки вокруг аргументов:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="o">&lt;</span><span class="n">procName</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Мы видели этот стиль, когда вызывали процедуру <code>echo</code>, и при вызове процедуры <code>len</code> без каких-либо аргументов.
Эти два также могут быть объединены вот так, но этот синтаксис, однако, не очень часто используется:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">.</span><span class="o">&lt;</span><span class="n">procName</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg3</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Унифицированный синтаксис вызова позволяет сделать цепочку из нескольких процедур более читаемой:</p>
</div>
<div class="listingblock">
<div class="title">ufcs.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="k">proc </span><span class="nf">multi</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>

<span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">echo</span> <span class="n">a</span><span class="p">.</span><span class="n">plus</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">plus</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">c</span><span class="p">.</span><span class="n">multi</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="n">multi</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>


<span class="n">echo</span> <span class="n">a</span><span class="p">.</span><span class="n">plus</span><span class="p">(</span><span class="n">b</span><span class="p">).</span><span class="n">multi</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">c</span><span class="p">.</span><span class="n">multi</span><span class="p">(</span><span class="n">b</span><span class="p">).</span><span class="n">plus</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>  <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Если несколько параметров имеют одинаковый тип, мы можем объявить их тип в этом компактном виде.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Сначала мы складываем <code>a</code> и <code>b</code>, затем результат этой операции (2 + 3 = 5) передается как первый параметр в процедуру <code>multi</code>, где он умножается на <code>c</code> (5 * 4 = 20).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Сначала мы умножаем <code>c</code> и <code>b</code>, затем результат этой операции (4 * 3 = 12) передается как первый параметр в процедуру <code>plus</code>, где он складывается с <code>a</code> (12 + 2 = 14).</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">true
true
20
14</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_переменная_result">Переменная result</h2>
<div class="sectionbody">
<div class="paragraph">
<p>В Nim, каждая процедура, которая возвращает значение, имеет неявно объявленную и инициализированную (значением по умолчанию) переменную <code>result</code>.
Процедура вернет значение этой переменной <code>result</code>, когда достигнет конца своего отступленного блока, даже если нет оператора <code>return</code>.</p>
</div>
<div class="listingblock">
<div class="title">result.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">findBiggest</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">:</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">number</span>
  <span class="c"># the end of proc                   </span><i class="conum" data-value="2"></i><b>(2)</b>

<span class="k">let</span> <span class="n">d</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="o">]</span>
<span class="n">echo</span> <span class="n">findBiggest</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Возвращаемый тип <code>int</code>. Переменная <code>result</code> инициализирована значением по умолчанию для <code>int</code>: <code>0</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Когда процедура достигает конца своего отступленного блока, возвращается значение переменной <code>result</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">33</code></pre>
</div>
</div>
<div class="paragraph">
<p>Обратите внимание, что эта процедура здесь приведена для демонстрации переменной <code>result</code>, и она не является на 100% корректной:
если вы передадите последовательность, содержащую только отрицательные числа, эта процедура вернет <code>0</code> (что <em>не</em> содержится в последовательности).</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Осторожно!
В старых версиях Nim (до Nim 0.19.0) значение по умолчанию для строк и последовательностей было <a href="https://en.wikipedia.org/wiki/Null_pointer"><code>nil</code></a>, и когда мы использовали их в качестве возвращаемых типов, переменная <code>result</code> должна была быть инициализирована как пустая строка (<code>""</code>) или как пустая последовательность (<code>@[]</code>).
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">result.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">keepOdds</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span><span class="p">):</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span> <span class="o">=</span>
  <span class="c"># result = @[]          </span><i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">number</span> <span class="ow">mod</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
      <span class="n">result</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>


<span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">98</span><span class="o">]</span>
<span class="n">echo</span> <span class="n">keepOdds</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>В версии Nim 0.19.0 и новее эта строка не нужна&#8201;&#8212;&#8201;последовательности автоматически инициализируются как пустые последовательности.<br>
В более старых версиях Nim последовательности должны быть инициализированы, и без этой строки компилятор выдаст ошибку. (Обратите внимание, что <code>var</code> не должен использоваться, так как <code>result</code> уже объявлен неявно.)</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@[1, 43, 57]</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Внутри процедуры мы также можем вызывать другие процедуры.</p>
</div>
<div class="listingblock">
<div class="title">filterOdds.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">isDivisibleBy3</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">bool</span> <span class="o">=</span>
  <span class="k">return</span> <span class="n">x</span> <span class="ow">mod</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span>

<span class="k">proc </span><span class="nf">filterMultiplesOf3</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span><span class="p">):</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span> <span class="o">=</span>
  <span class="c"># result = @[]            </span><i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">i</span><span class="p">.</span><span class="n">isDivisibleBy3</span><span class="p">():</span>  <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="n">result</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>


<span class="k">let</span>
  <span class="n">g</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>
  <span class="n">h</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="o">]</span>
  <span class="n">i</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">626</span><span class="p">,</span> <span class="mi">45390</span><span class="p">,</span> <span class="mi">3219</span><span class="p">,</span> <span class="mi">4210</span><span class="p">,</span> <span class="mi">4126</span><span class="o">]</span>

<span class="n">echo</span> <span class="n">filterMultiplesOf3</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">h</span><span class="p">.</span><span class="n">filterMultiplesOf3</span><span class="p">()</span>
<span class="n">echo</span> <span class="n">filterMultiplesOf3</span> <span class="n">i</span>   <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Ещё раз, эта строка не нужна в новых версиях Nim.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Вызов ранее объявленной процедуры. Её возвращаемый тип <code>bool</code> и может быть использован в условии if.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Третий способ вызова процедуры, как мы видели выше.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@[6, 9, 0, 3]
@[3]
@[45390, 3219]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_предварительное_объявление">Предварительное объявление</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Как упоминалось в самом начале этого раздела, мы можем объявить процедуру без блока кода.
Причина этого в том, что мы должны объявить процедуры до того, как мы сможем их вызвать, и вот так делать не будет работать:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="mf">5.</span><span class="n">plus</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c"># error      </span><i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">proc </span><span class="nf">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Это приведет к ошибке, так как <code>plus</code> еще не определена.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Здесь мы определяем <code>plus</code>, но так как она определена после её использования, Nim ещё не знает о ней.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Способ обойти это - это то, что называется предварительным объявлением:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span>    <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">echo</span> <span class="mf">5.</span><span class="n">plus</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>              <i class="conum" data-value="2"></i><b>(2)</b>

<span class="k">proc </span><span class="nf">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Тут мы говорим Nim, что процедура <code>plus</code> существует с таким определением.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Теперь мы можем использовать её в коде, это будет работать.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Это место, где <code>plus</code> реализована на самом деле, и она должна соответствовать предыдущему определению.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_упражнения_4">Упражнения</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Создайте процедуру, которая будет приветствовать человека (печатать "Hello &lt;name&gt;") на основе предоставленного имени. Создайте последовательность имен. Приветствуйте каждого человека с помощью созданной процедуры.</p>
</li>
<li>
<p>Создайте процедуру <code>findMax3</code>, которая будет возвращать наибольшее из трех значений.</p>
</li>
<li>
<p>Точки на плоскости можно представить как <code>tuple[x, y: float]</code>. Напишите процедуру, которая будет получать две точки и возвращать новую точку, которая является суммой этих двух точек (складывая x и y отдельно).</p>
</li>
<li>
<p>Создайте две процедуры <code>tick</code> и <code>tock</code>, которые будут печатать слова "tick" и "tock". Создайте глобальную переменную для отслеживания количества вызовов, и вызывайте одну процедуру из другой до тех пор, пока счетчик не достигнет 20. Ожидаемый вывод - строки с "tick" и "tock", чередующиеся 20 раз. (Подсказка: используйте предварительное объявление.)</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Вы можете нажать Ctrl+C, чтобы остановить выполнение программы, если вы ввели бесконечный цикл.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Тестируйте все процедуры, вызывая их с разными параметрами.</p>
</div>
</div>
</div>
<h1 id="_модули" class="sect0">Модули</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>До сих пор мы использовали функциональность, которая доступна по умолчанию каждый раз, когда мы запускаем новый файл Nim.
Это можно расширить с помощью модулей, которые предоставляют больше функциональности по некоторым конкретным темам.</p>
</div>
<div class="paragraph">
<p>Некоторые из наиболее часто используемых модулей Nim:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>strutils</code>: дополнительная функциональность при работе со строками</p>
</li>
<li>
<p><code>sequtils</code>: дополнительная функциональность для последовательностей</p>
</li>
<li>
<p><code>math</code>: математические функции (логарифмы, квадратные корни, &#8230;&#8203;), тригонометрия (sin, cos, &#8230;&#8203;)</p>
</li>
<li>
<p><code>times</code>: измерение и работа со временем</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Но их гораздо больше, как в так называемой <a href="https://nim-lang.org/docs/lib.html">стандартной библиотеке</a>, так и в <a href="https://nimble.directory/">менеджере пакетов nimble</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_импортирование_модуля">Импортирование модуля</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Если мы хотим импортировать модуль и всю его функциональность, все, что нам нужно сделать, это поместить <code>import &lt;moduleName&gt;</code> в наш файл.
Это обычно делается вверху файла, чтобы мы могли легко видеть, что использует наш код.</p>
</div>
<div class="listingblock">
<div class="title">stringutils.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span>       <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="s">"My string with whitespace."</span>
  <span class="n">b</span> <span class="o">=</span> <span class="sc">'!'</span>

<span class="n">echo</span> <span class="n">a</span><span class="p">.</span><span class="n">split</span><span class="p">()</span>        <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">a</span><span class="p">.</span><span class="n">toUpperAscii</span><span class="p">()</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="n">b</span><span class="p">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>      <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Импортируем <a href="https://nim-lang.org/docs/strutils.html">strutils</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Используем <code>split</code> из модуля <code>strutils</code>. Он разбивает строку на последовательность слов.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>toUpperAscii</code> преобразует все ASCII буквы в верхний регистр.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>repeat</code> также из модуля <code>strutils</code>, и он повторяет либо символ, либо всю строку указанное количество раз.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@["My", "string", "with", "whitespace."]
MY STRING WITH WHITESPACE.
!!!!!</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Для пользователей, приходящих из других языков программирования (особенно Python), способ импорта в Nim может показаться "неправильным". Если это так, рекомендуется прочитать <a href="https://narimiran.github.io/2019/07/01/nim-import.html">это</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="listingblock">
<div class="title">maths.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">math</span>                 <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mf">30.0</span> <span class="c"># degrees</span>
  <span class="n">cRadians</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">degToRad</span><span class="p">()</span>   <i class="conum" data-value="2"></i><b>(2)</b>

<span class="n">echo</span> <span class="n">cRadians</span>
<span class="n">echo</span> <span class="n">sin</span><span class="p">(</span><span class="n">cRadians</span><span class="p">).</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <i class="conum" data-value="3"></i><b>(3)</b>

<span class="n">echo</span> <span class="mi">2</span><span class="p">^</span><span class="mi">5</span>                    <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Импортируем <a href="https://nim-lang.org/docs/math.html">math</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Преобразуем градусы в радианы с помощью <code>degToRad</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>sin</code> принимает радианы. Мы округляем (также из модуля <code>math</code>) результат до максимум 2 знаков после запятой. (В противном случае результат был бы: 0.4999999999999999)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Модуль math также имеет оператор <code>^</code> для вычисления степеней числа.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">0.5235987755982988
0.5
32</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_создание_собственных_модулей">Создание собственных модулей</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Спустя время у нас будет достаточно кода в проекте, что имеет смысл разделить его на части, каждая из которых делает определённую вещь.
Если вы создадите два файла рядом в папке, назовём их <code>firstFile.nim</code> и <code>secondFile.nim</code>, вы можете импортировать один из другого как модуль:</p>
</div>
<div class="listingblock">
<div class="title">firstFile.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">plus</span><span class="o">*</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">proc </span><span class="nf">minus</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Обратите внимание, как процедура <code>plus</code> теперь имеет звёздочку (<code>*</code>) после её имени, это говорит Nim, что другой файл, импортирующий этот файл, сможет использовать эту процедуру.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>В противоположность этому, эта процедура не будет видна при импорте этого файла.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">secondFile.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">firstFile</span>          <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">echo</span> <span class="n">plus</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>          <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">minus</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c"># error </span><i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Тут мы импортируем <code>firstFile.nim</code>. Нам не нужно добавлять расширение <code>.nim</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Это будет работать нормально и выведет <code>15</code>, так как процедура объявлена в <code>firstFile</code> и доступна нам.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Однако это вызовет ошибку, так как процедура <code>minus</code> не видна, так как у неё нет звёздочки после имени.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>В случае, если у вас больше двух файлов, вы можете организовать их в подкаталоги (или более одного подкаталога).
Со следующей структурой каталогов:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">.
├── myOtherSubdir
│   ├── fifthFile.nim
│   └── fourthFile.nim
├── mySubdir
│   └── thirdFile.nim
├── firstFile.nim
└── secondFile.nim</code></pre>
</div>
</div>
<div class="paragraph">
<p>Если вы хотите импортировать все файлы в вашем <code>secondFile.nim</code>, вот как вы это сделаете:</p>
</div>
<div class="listingblock">
<div class="title">secondFile.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">firstFile</span>
<span class="k">import</span> <span class="n">mySubdir</span><span class="o">/</span><span class="n">thirdFile</span>
<span class="k">import</span> <span class="n">myOtherSubdir</span> <span class="o">/</span> <span class="o">[</span><span class="n">fourthFile</span><span class="p">,</span> <span class="n">fifthFile</span><span class="o">]</span></code></pre>
</div>
</div>
</div>
</div>
<h1 id="_взаемодействие_с_пользовательским_вводом" class="sect0">Взаемодействие с пользовательским вводом</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Использование того, что мы уже представили до сих пор (базовые типы данных и контейнеры, управление потоком, циклы) позволяет нам создавать довольно много простых программ.</p>
</div>
<div class="paragraph">
<p>В этой главе мы научимся делать наши программы более интерактивными.
Для этого нам нужна возможность читать данные из файла или запрашивать ввод от пользователя.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_чтение_из_файла">Чтение из файла</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Например мы имеем текстовый файл под названием <code>people.txt</code> в той же директории, что и наш Nim код.
Содержимое этого файла выглядит так:</p>
</div>
<div class="listingblock">
<div class="title">people.txt</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">Alice</span> <span class="n">A</span><span class="p">.</span>
<span class="n">Bob</span> <span class="n">B</span><span class="p">.</span>
<span class="n">Carol</span> <span class="n">C</span><span class="p">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Мы хотим использовать содержимое этого файла в нашей программе, как список (последовательность) имён.</p>
</div>
<div class="listingblock">
<div class="title">readFromFile.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span>

<span class="k">let</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">readFile</span><span class="p">(</span><span class="s">"people.txt"</span><span class="p">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">contents</span>

<span class="k">let</span> <span class="n">people</span> <span class="o">=</span> <span class="n">contents</span><span class="p">.</span><span class="n">splitLines</span><span class="p">()</span>    <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">people</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Чтобы прочитать содержимое файла, мы используем процедуру <code>readFile</code>, и передаем ей путь к файлу, из которого нужно читать (если файл находится в той же директории, что и наш Nim-программа, достаточно просто указать имя файла). Результатом является многострочная строка.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Чтобы разбить многострочную строку на последовательность строк (каждая строка содержит содержимое одной строки файла), мы используем <code>splitLines</code> из модуля <code>strutils</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Alice A.
Bob B.
Carol C.
            <i class="conum" data-value="1"></i><b>(1)</b>
@["Alice A.", "Bob B.", "Carol C.", ""] <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Это последняя строка в файле, которая содержит пустую строку.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Из-за пустой строки в конце файла, наша последовательность длиннее, чем мы ожидали/хотели.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Чтобы решить проблему с пустой строкой в конце, мы можем использовать процедуру <code>strip</code> из модуля <code>strutils</code> после чтения файла.
Всё, что делает <code>strip</code>, это удаляет любые так называемые пробельные символы (whitespace) в начале и конце строки.
Пробельные символы — это просто символы, создающие пробелы: новые строки, пробелы, табуляции и т.д.</p>
</div>
<div class="listingblock">
<div class="title">readFromFile2.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span>

<span class="k">let</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">readFile</span><span class="p">(</span><span class="s">"people.txt"</span><span class="p">).</span><span class="n">strip</span><span class="p">()</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">contents</span>

<span class="k">let</span> <span class="n">people</span> <span class="o">=</span> <span class="n">contents</span><span class="p">.</span><span class="n">splitLines</span><span class="p">()</span>
<span class="n">echo</span> <span class="n">people</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Используя <code>strip</code>, мы получаем ожидаемые результаты.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Alice A.
Bob B.
Carol C.
@["Alice A.", "Bob B.", "Carol C."]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_чтение_пользовательского_ввода">Чтение пользовательского ввода</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Если мы хотим взаимодействовать с пользователем, мы должны иметь возможность запрашивать у него ввод, а затем обрабатывать его и использовать.
Нам нужно читать из <a href="https://en.wikipedia.org/wiki/Standard_streams#Standard_input_(stdin)">стандартного ввода (stdin)</a> передавая <code>stdin</code> в процедуру <code>readLine</code>.</p>
</div>
<div class="listingblock">
<div class="title">interaction1.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"Please enter your name:"</span>
<span class="k">let</span> <span class="n">name</span> <span class="o">=</span> <span class="n">readLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">echo</span> <span class="s">"Hello "</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s">", nice to meet you!"</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Тип <code>name</code> автоматически определяется как строка.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Please enter your name:
        <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Ожидаем ввод от пользователя. После того как мы введем имя и нажмем <code>Enter</code>, программа продолжится.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Please enter your name:
Alice
Hello Alice, nice to meet you!</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Если вы используете устаревшую версию VS Code, вы не можете запускать это обычным способом (используя <code>Ctrl+Alt+N</code>), потому что окно вывода не позволяет вводить данные пользователя&#8201;&#8212;&#8201;вам нужно запускать эти примеры в терминале.<br>
С более новыми версиями VS Code такой проблемы нет.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_работа_с_числами">Работа с числами</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Чтение из файла или из пользовательского ввода всегда даёт строку в качестве результата.
Если мы хотим использовать числа, нам нужно конвертировать строки в числа: мы снова используем модуль <code>strutils</code> и используем <code>parseInt</code> для конвертации в целые числа или <code>parseFloat</code> для конвертации в число с плавающей точкой.</p>
</div>
<div class="listingblock">
<div class="title">interaction2.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span>

<span class="n">echo</span> <span class="s">"Please enter your year of birth:"</span>
<span class="k">let</span> <span class="n">yearOfBirth</span> <span class="o">=</span> <span class="n">readLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">).</span><span class="n">parseInt</span><span class="p">()</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">2018</span> <span class="o">-</span> <span class="n">yearOfBirth</span>

<span class="n">echo</span> <span class="s">"You are "</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="s">" years old."</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Конвертируем строку в целое число. Когда написано так, мы доверяем пользователю, что он введёт корректное целое число. Что произойдёт, если пользователь введёт <code>'79</code> или <code>ninety-three</code>? Попробуйте сами.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Please enter your year of birth:
1934
You are 84 years old.</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Допустим, у нас есть файл <code>numbers.txt</code> в той же директории, что и наш Nim код, со следующим содержимым:</p>
</div>
<div class="listingblock">
<div class="title">numbers.txt</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="mf">27.3</span>
<span class="mf">98.24</span>
<span class="mf">11.93</span>
<span class="mf">33.67</span>
<span class="mf">55.01</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>и мы хотим прочитать этот файл и найти сумму и среднее значение предоставленных чисел, мы можем сделать следующее:</p>
</div>
<div class="listingblock">
<div class="title">interaction3.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span><span class="p">,</span> <span class="n">sequtils</span><span class="p">,</span> <span class="n">math</span>        <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span>
  <span class="n">strNums</span> <span class="o">=</span> <span class="n">readFile</span><span class="p">(</span><span class="s">"numbers.txt"</span><span class="p">).</span><span class="n">strip</span><span class="p">().</span><span class="n">splitLines</span><span class="p">()</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">nums</span> <span class="o">=</span> <span class="n">strNums</span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="n">parseFloat</span><span class="p">)</span>       <i class="conum" data-value="3"></i><b>(3)</b>

<span class="k">let</span>
  <span class="n">sumNums</span> <span class="o">=</span> <span class="n">sum</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>                  <i class="conum" data-value="4"></i><b>(4)</b>
  <span class="n">average</span> <span class="o">=</span> <span class="n">sumNums</span> <span class="o">/</span> <span class="kt">float</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">len</span><span class="p">)</span>  <i class="conum" data-value="5"></i><b>(5)</b>

<span class="n">echo</span> <span class="n">sumNums</span>
<span class="n">echo</span> <span class="n">average</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Мы импортируем несколько модулей. <code>strutils</code> даёт нам <code>strip</code> и <code>splitLines</code>, <code>sequtils</code> даёт <code>map</code>, а <code>math</code> даёт <code>sum</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Мы удаляем последнюю новую строку, и разбиваем строки на последовательность строк.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>map</code> работает, применяя процедуру (в данном случае <code>parseFloat</code>) к каждому элементу контейнера. Другими словами, мы конвертируем каждую строку в число с плавающей точкой, возвращая новую последовательность чисел с плавающей точкой.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Используем <code>sum</code> из модуля <code>math</code>, чтобы получить сумму всех элементов в последовательности.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Нам нужно конвертировать длину последовательности в число с плавающей точкой, потому что <code>sumNums</code> является числом с плавающей точкой.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="mf">226.15</span>
<span class="mf">45.23</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_упражнения_5">Упражнения</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Спросите пользователя о его росте и весе. Рассчитайте его <a href="https://en.wikipedia.org/wiki/Body_mass_index">ИМТ</a>. Сообщите пользователю значение ИМТ и категорию.</p>
</li>
<li>
<p>Повторите упражнение о гипотезе Коллатца, чтобы ваша программа запрашивала у пользователя начальное число. Выведите получившуюся последовательность.</p>
</li>
<li>
<p>Спросите пользователя о строке, которую он хочет перевернуть. Создайте процедуру, которая принимает строку и возвращает перевернутую версию. Например, если пользователь введет <code>Nim-lang</code>, процедура должна вернуть <code>gnal-miN</code>. (Подсказка: используйте индексацию и <code>countdown</code>)</p>
</li>
</ol>
</div>
</div>
</div>
<h1 id="_заключение_2" class="sect0">Заключение</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Время подводить итоги этого Туториала.
Надеюсь, это было полезно для вас, и вы смогли сделать свои первые шаги в программировании и/или в языке программирования Nim.</p>
</div>
<div class="paragraph">
<p>Это были лишь основы, и мы только поцарапали поверхность, но этого должно быть достаточно, чтобы вы могли создавать простые программы и решать некоторые простые задачи или головоломки.
Nim предлагает гораздо больше, и, надеюсь, вы продолжите исследовать его возможности.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_что_дальше">Что дальше?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Если вы хотите продолжить обучение по Туториалам Nim:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://nim-lang.org/docs/tut1.html">Official Nim tutorial</a></p>
</li>
<li>
<p><a href="https://nim-by-example.github.io/">Nim by example</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Если вы хотите решать задачи программирования, вот несколько ресурсов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://adventofcode.com/">Advent of Code</a>: Серия интересных головоломок, публикуемых каждый декабрь. Архив старых головоломок (с 2015 года) доступен.</p>
</li>
<li>
<p><a href="https://projecteuler.net/">Project Euler</a>: В основном математические задачи.
&#160;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Удачного Программирования!</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<hr>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Исходные файлы доступны <a href="https://github.com/kisvey/nim-basics-ru">на Github</a>.
Оригинальный туториал доступен <a href="https://github.com/narimiran/nim-basics">на Github</a>.</p>
</div>
</div>
</div>
</div>
</body>
</html>